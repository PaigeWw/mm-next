(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{VfcO:function(e,n,t){"use strict";t.r(n);var r=t("dfwq"),c=t("ln6h"),a=t.n(c),o=t("O40h"),i=t("q1tI"),s=t.n(i),u=t("VdAu"),f=t("h7rA"),l=t("MbLX"),g=s.a.createElement,p=function(e){var n=e.goodsList,t=e.onAssignCategory,r=e.assignCategoryList;return console.log("assignCategoryList",r),g(u.a,{width:[1],sx:{cursor:"pointer","&:hover":{background:"rgba(255, 255, 255, 0.5)"}}},n.map(function(e,n){return e.category.length>0?g(u.a,{width:[1]},g(u.e,{fontWeight:"bold",textAlign:"center",lineHeight:"0.6rem",fontSize:"0.22",color:"#fff",bg:"#535353",sx:{height:"0.6rem",width:"100%"}},"0".concat(n+1," ").concat(e.name)),g(u.c,{width:[1],flexWrap:"wrap",bg:"#FFF0E5"},e.category.map(function(e,n){var c=r.indexOf(e._id)>=0;return g(u.c,{alignItems:"center",justifyContent:"space-around",width:[.2],height:"1.5rem",fontSize:"0.14rem",sx:{background:c?"#FFC1AE":"","&:hover":{background:"#cccccc"}},onClick:function(n){t(e._id,c)}},g(u.e,{fontSize:"0.18rem",sx:{color:"#FF8E6C"}},"ABCDEFGHIJKLMNOPQRSTUVWXYZ"[n]),g(u.e,{sx:{color:"#000000"}},e.name))}))):null}))},h=t("ZPNs"),d=s.a.createElement;n.default=function(){var e=Object(f.a)(),n=Object(i.useState)([]),t=n[0],c=n[1],g=Object(i.useState)([]),b=g[0],w=g[1],v=Object(i.useState)([]),x=v[0],m=v[1],O=Object(i.useState)({}),j=O[0],y=O[1],C=Object(i.useState)(!1),k=C[0],E=C[1];Object(i.useEffect)(function(){1===e.role&&(function(){var e=Object(o.a)(a.a.mark(function e(){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.a)("goods/getList");case 2:n=e.sent,c(n||[]);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()(),function(){var e=Object(o.a)(a.a.mark(function e(){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.a)("user/getUserChannels");case 2:n=e.sent,w(n.channels),n.channels.length>0&&y(n.channels[0]);case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()())},[e]),Object(i.useEffect)(function(){j._id&&1===e.role&&function(){var e=Object(o.a)(a.a.mark(function e(){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.a)("channel/getAssignCategory",{channelId:j._id});case 2:(n=e.sent)&&m(n.categories);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()()},[j,e]);var _=function(){var e=Object(o.a)(a.a.mark(function e(n,t){var c;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=7;break}return e.next=3,Object(h.a)("channel/unAssignCategory",{channelId:j._id,categoryId:n},"post");case 3:e.sent&&(c=x.indexOf(n))>=0&&(x.splice(c,1),m(Object(r.a)(x))),e.next=11;break;case 7:return e.next=9,Object(h.a)("channel/assignCategory",{channelId:j._id,categoryId:n},"post");case 9:e.sent&&m([].concat(Object(r.a)(x),[n]));case 11:case"end":return e.stop()}},e)}));return function(n,t){return e.apply(this,arguments)}}();return d(s.a.Fragment,null,1!==e.role?d(u.e,null,"No authority\uff01"):d(u.c,{height:"100vh",flexDirection:"column"},d(l.a,null),d(u.a,{width:[1]},b.length>0?d(u.c,{bg:"#000000",width:[1],pl:"1.1rem",lineHeight:"1.14rem",sx:{height:"1.14rem",position:"relative",cursor:"pointer"},color:"#fff",onClick:function(){E(!0)}},"".concat(j.code,"(").concat(j.name,")"),k?d(u.a,{sx:{position:"absolute",border:"1px solid #000",top:"calc(0.507rem + 20px)"},color:"#000",bg:"#fff"},b.map(function(e){return d(u.e,{width:"160px",lineHeight:"32px",pl:"12px",sx:{"&:hover":{background:"#cccccc",color:"#fff"}},onClick:function(n){n.nativeEvent.preventDefault(),n.nativeEvent.stopPropagation(),y(e),E(!1)}},"".concat(e.code,"(").concat(e.name,")"))})):null):null,d(p,{goodsList:t,assignCategoryList:x||[],onAssignCategory:_}))))}},dfwq:function(e,n,t){"use strict";var r=t("p0XB"),c=t.n(r);var a=t("d04V"),o=t.n(a),i=t("yLu3"),s=t.n(i);function u(e){return function(e){if(c()(e)){for(var n=0,t=new Array(e.length);n<e.length;n++)t[n]=e[n];return t}}(e)||function(e){if(s()(Object(e))||"[object Arguments]"===Object.prototype.toString.call(e))return o()(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}t.d(n,"a",function(){return u})},eo6D:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/assign",function(){return t("VfcO")}])}},[["eo6D",1,0]]]);