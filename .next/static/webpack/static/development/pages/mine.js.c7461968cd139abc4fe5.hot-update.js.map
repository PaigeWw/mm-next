{"version":3,"file":"static/webpack/static/development/pages/mine.js.c7461968cd139abc4fe5.hot-update.js","sources":["webpack:///./components/tables/order-table.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\"\nimport { Flex, Text, Box, Button, Row, Column } from \"rebass\"\nimport Table, { TableLine, ProductInfo } from \"./base-table\"\nimport ShowStyle from \"../show-style\"\nimport InputNumber from \"../number-input\"\nimport request from \"../../utils/request\"\n\nexport default props => {\n\tconst { selectStyles } = props\n\tconst line = props.selectStyles.length\n\tconsole.log(selectStyles)\n\tconst initData = selectStyles.map(x => {\n\t\tlet sizeInfo = x.details[0].size.values.map(item => ({ ...item, num: 0 }))\n\t\tconsole.log()\n\t\treturn {\n\t\t\tfavoriteId: x.id,\n\t\t\tsizeInfo: sizeInfo,\n\t\t\ttotal: 0,\n\t\t\tsignalPrice:\n\t\t\t\tx.details[0].price + (x.details.length > 1 ? x.details[1].price : 0)\n\t\t}\n\t})\n\tconst [orderData, setOrderData] = useState(initData)\n\tconst [packageCount, setPackageCount] = useState(1)\n\tconst handleChangePackageCount = num => {\n\t\tif (num < 1) return\n\t\tsetPackageCount(num)\n\t\torderData.map((order, index) => {\n\t\t\torder.total = getItemsTotal(index) * num\n\t\t})\n\t\tsetOrderData([].concat(orderData))\n\t}\n\tconst handleChangeOrder = (styleIndex, sizeIndex, num) => {\n\t\tconsole.log(num)\n\t\tif (num < 0) return\n\t\torderData[styleIndex].sizeInfo[sizeIndex].num = parseInt(num, 10)\n\t\tlet allNumSum = getItemsTotal(styleIndex)\n\t\torderData[styleIndex].total = allNumSum * packageCount\n\t\tlet temp = allNumSum * packageCount * orderData[styleIndex].signalPrice\n\t\torderData[styleIndex].totalPrice.toFixed(2)\n\t\tsetOrderData([].concat(orderData))\n\t\t// console.log(\"orderData\", orderData)\n\t}\n\tconst getItemsTotal = index => {\n\t\tif (index < orderData.length) {\n\t\t\tlet count = 0\n\t\t\torderData[index].sizeInfo.map(size => {\n\t\t\t\tcount += size.num\n\t\t\t})\n\t\t\treturn count\n\t\t}\n\t}\n\n\tconst handleSubmitOrder = async () => {\n\t\tconst res = await request(\n\t\t\t\"/order/add\",\n\t\t\t{\n\t\t\t\tpackageCount,\n\t\t\t\torderData\n\t\t\t},\n\t\t\t\"post\"\n\t\t)\n\t\tif (res) {\n\t\t\tprops.nextStep()\n\t\t}\n\t}\n\treturn (\n\t\t<Flex\n\t\t\tflexDirection=\"column\"\n\t\t\tjustifyContent=\"space-between\"\n\t\t\tsx={{\n\t\t\t\tcursor: \"pointer\",\n\t\t\t\theight: \"100%\",\n\t\t\t\tbackground: \"#FFF0E5\"\n\t\t\t}}\n\t\t>\n\t\t\t<Box\n\t\t\t\tsx={{\n\t\t\t\t\tpadding: \"0 18px 18px 18px\",\n\t\t\t\t\theight: \"max-content\",\n\t\t\t\t\tdisplay: \"table\"\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<Table\n\t\t\t\t\tsx={{ margin: \"0\", marginRight: \"1px\", width: \"100%\" }}\n\t\t\t\t\ttitles={[\n\t\t\t\t\t\t{ name: \"00\", width: \"2/22\", isHide: true },\n\t\t\t\t\t\t{ name: \"SECTION NUMBER\", width: \"2/22\" },\n\t\t\t\t\t\t{ name: \"COLOUR\", width: \"4/22\" },\n\t\t\t\t\t\t{ name: \"IMAGE\", width: \"1/22\" },\n\t\t\t\t\t\t{ name: \"SIZE\", width: \"2/22\" },\n\t\t\t\t\t\t{ name: \"PACKAGES\", width: \"2/22\" },\n\t\t\t\t\t\t{ name: \"QUANTITY\", width: \"2/22\" },\n\t\t\t\t\t\t{ name: \"PRICE\", width: \"4/22\" },\n\t\t\t\t\t\t{ name: \"TOTAL AMOUN\", width: \"1/22\" },\n\t\t\t\t\t\t{ name: \"DELETE\", width: \"2/22\" }\n\t\t\t\t\t]}\n\t\t\t\t>\n\t\t\t\t\t{selectStyles.map((collect, index) => (\n\t\t\t\t\t\t<TableLine haveDel>\n\t\t\t\t\t\t\t<Text>{index}</Text>\n\t\t\t\t\t\t\t<ProductInfo styleNum=\"XSJHFH00928\" />\n\t\t\t\t\t\t\t<Flex flexDirection=\"column\">\n\t\t\t\t\t\t\t\t<ProductInfo made=\"2110 YE GREEN\" />\n\t\t\t\t\t\t\t\t<ProductInfo made=\"2110 YE GREEN\" />\n\t\t\t\t\t\t\t</Flex>\n\t\t\t\t\t\t\t<ShowStyle\n\t\t\t\t\t\t\t\tkey={collect.id}\n\t\t\t\t\t\t\t\timgWidth=\"0.95rem\"\n\t\t\t\t\t\t\t\tmode={\"POSITIVE\"}\n\t\t\t\t\t\t\t\tthreeViews={collect.threeViews}\n\t\t\t\t\t\t\t\tborder=\"none\"\n\t\t\t\t\t\t\t\thideInfo\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Flex justifyContent=\"space-between\">\n\t\t\t\t\t\t\t\t{collect.details[0].size.values.map((size, sizeIndex) => (\n\t\t\t\t\t\t\t\t\t<Flex flexDirection=\"column\">\n\t\t\t\t\t\t\t\t\t\t<Text mr=\"10px\">{size.name}</Text>\n\t\t\t\t\t\t\t\t\t\t<InputNumber\n\t\t\t\t\t\t\t\t\t\t\tvalue={orderData[index].sizeInfo[sizeIndex].num}\n\t\t\t\t\t\t\t\t\t\t\tonChange={num => {\n\t\t\t\t\t\t\t\t\t\t\t\thandleChangeOrder(index, sizeIndex, num)\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(collect.id, size.name, num)\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\tupValue={() => {\n\t\t\t\t\t\t\t\t\t\t\t\thandleChangeOrder(\n\t\t\t\t\t\t\t\t\t\t\t\t\tindex,\n\t\t\t\t\t\t\t\t\t\t\t\t\tsizeIndex,\n\t\t\t\t\t\t\t\t\t\t\t\t\torderData[index].sizeInfo[sizeIndex].num + 1\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\tdownValue={() => {\n\t\t\t\t\t\t\t\t\t\t\t\thandleChangeOrder(\n\t\t\t\t\t\t\t\t\t\t\t\t\tindex,\n\t\t\t\t\t\t\t\t\t\t\t\t\tsizeIndex,\n\t\t\t\t\t\t\t\t\t\t\t\t\torderData[index].sizeInfo[sizeIndex].num - 1\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Flex>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t{/* {console.log(collect.details[0].size)}\n\t\t\t\t\t\t\t\t<Flex flexDirection=\"column\">\n\t\t\t\t\t\t\t\t\t<Text mr=\"10px\">S</Text>\n\t\t\t\t\t\t\t\t\t<InputNumber />\n\t\t\t\t\t\t\t\t</Flex> */}\n\t\t\t\t\t\t\t</Flex>\n\t\t\t\t\t\t\t{index > 0 ? null : (\n\t\t\t\t\t\t\t\t<Flex\n\t\t\t\t\t\t\t\t\trowspan={line}\n\t\t\t\t\t\t\t\t\thasBorder={\"1px solid\"}\n\t\t\t\t\t\t\t\t\tjustifyContent=\"center\"\n\t\t\t\t\t\t\t\t\talignItems=\"center\"\n\t\t\t\t\t\t\t\t\tsx={{ width: \"100%\", height: \"100%\" }}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<InputNumber\n\t\t\t\t\t\t\t\t\t\tvalue={packageCount}\n\t\t\t\t\t\t\t\t\t\tonChange={num => {\n\t\t\t\t\t\t\t\t\t\t\thandleChangePackageCount(\n\t\t\t\t\t\t\t\t\t\t\t\tnum == \"\" || !num ? 0 : parseInt(num)\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tupValue={() => {\n\t\t\t\t\t\t\t\t\t\t\thandleChangePackageCount(packageCount + 1)\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tdownValue={() => {\n\t\t\t\t\t\t\t\t\t\t\thandleChangePackageCount(packageCount - 1)\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Flex>\n\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t<Text>{orderData[index].total}</Text>\n\t\t\t\t\t\t\t<Flex flexDirection=\"column\">{orderData[index].signalPrice}</Flex>\n\t\t\t\t\t\t\t<Text>\n\t\t\t\t\t\t\t\t{orderData[index].signalPrice *\n\t\t\t\t\t\t\t\t\torderData[index].total *\n\t\t\t\t\t\t\t\t\tpackageCount}\n\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t</TableLine>\n\t\t\t\t\t))}\n\t\t\t\t</Table>\n\t\t\t</Box>\n\n\t\t\t<Button\n\t\t\t\tvariant=\"primary\"\n\t\t\t\theight=\"1.13rem\"\n\t\t\t\twidth=\"19.2rem\"\n\t\t\t\tbg=\"#000\"\n\t\t\t\tcolor=\"#fff\"\n\t\t\t\tpadding=\"0\"\n\t\t\t\tsx={{\n\t\t\t\t\tborderRadius: 0,\n\t\t\t\t\tfontSize: \"0.27rem\",\n\t\t\t\t\tcursor: \"pointer\"\n\t\t\t\t}}\n\t\t\t\tonClick={handleSubmitOrder}\n\t\t\t>\n\t\t\t\tCOMPLETE\n\t\t\t</Button>\n\t\t</Flex>\n\t)\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAOA;AACA;AAfA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AAgBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AACA;AAFA;AACA;AAJA;AACA;AACA;AAOA;AACA;AACA;AACA;AAZA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAYA;AAEA;AACA;AACA;AACA;AACA;AACA;AAHA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA;AACA;AACA;AACA;AAHA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAZA;AAAA;AAAA;AAAA;AAAA;AAAA;AAeA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AANA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAKA;AACA;AACA;AAKA;AAnBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAHA;AAkCA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAZA;AAAA;AAAA;AAAA;AAAA;AAAA;AAiBA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AA5EA;AAuFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AAZA;AAAA;AAAA;AAAA;AAAA;AAAA;AAkBA;;;;A","sourceRoot":""}