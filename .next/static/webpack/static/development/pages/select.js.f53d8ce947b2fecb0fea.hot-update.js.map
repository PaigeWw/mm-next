{"version":3,"file":"static/webpack/static/development/pages/select.js.f53d8ce947b2fecb0fea.hot-update.js","sources":["webpack:///./pages/select.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\"\nimport { Flex, Text, Box, Button, Image } from \"rebass\"\nimport Router from \"next/router\"\n\nimport Head from \"../components/nav\"\nimport SelectBar from \"../components/select-bar\"\nimport SelectLine from \"../components/select-line\"\nimport SelectAssignTool from \"../components/select-assign-tool\"\n\nimport useUserInfo from \"../hooks/getUserInfo\"\nimport request from \"../utils/request.js\"\nimport { getPageQuery } from \"../utils/helper\"\nexport default () => {\n\tconst info = useUserInfo()\n\t// console.log(info)\n\tconst [categoryList, setGategoryList] = useState([{ styles: [] }])\n\tconst [currentSeleted, setCurrentSeleted] = useState(false)\n\tconst [selectStyles, setSelectStyles] = useState([])\n\tconst [selectStylesType, setSelectStylesType] = useState([])\n\tconst [showToast, setShowToast] = useState(false)\n\tconst [toast, setToast] = useState({})\n\tuseEffect(() => {\n\t\tconst getGategoryList = async () => {\n\t\t\tlet query = getPageQuery()\n\n\t\t\tconst req = await request(\"goods/detail\", { _id: query.id }, \"get\")\n\t\t\tif (!req) return\n\t\t\tsetGategoryList(req.category)\n\t\t}\n\t\tgetGategoryList()\n\t}, [])\n\t// const info = useUserInfo()\n\tconst handleSelectStyle = (sid, type, top, col, styleItem) => {\n\t\tlet pos = selectStyles.indexOf(sid)\n\t\tif (pos > -1) {\n\t\t\t//已选中 则去除 选中\n\t\t\tif (selectStyles.length > 1) {\n\t\t\t\tlet savePos = (pos + 1) % 2\n\t\t\t\tsetSelectStyles(selectStyles.slice(savePos, savePos + 1))\n\t\t\t\tsetSelectStyles(selectStylesType.slice(savePos, savePos + 1))\n\t\t\t} else {\n\t\t\t\tsetSelectStyles([])\n\t\t\t\tsetSelectStylesType([])\n\t\t\t}\n\t\t\tsetCurrentSeleted(false)\n\t\t} else {\n\t\t\t//为选中 则 设置为选中\n\n\t\t\tsetCurrentSeleted({ sid, type, top, col, styleItem })\n\t\t\tlet topsPos = selectStylesType.indexOf(\"TOPS\")\n\t\t\tlet bottomsPos = selectStylesType.indexOf(\"BOTTOMS\")\n\t\t\tconsole.log({ sid, type, topsPos })\n\t\t\tconsole.log(topsPos > -1 && type == \"BOTTOMS\")\n\t\t\tif (topsPos > -1 && type == \"BOTTOMS\") {\n\t\t\t\tlet saveTemps = selectStyles.slice(topsPos, topsPos + 1)\n\t\t\t\tsaveTemps.push(sid)\n\t\t\t\tsetSelectStyles(saveTemps)\n\t\t\t\tsetSelectStylesType([\"TOPS\", type])\n\t\t\t\treturn\n\t\t\t}\n\t\t\tif (bottomsPos > -1 && type == \"TOPS\") {\n\t\t\t\tlet saveTemps = selectStyles.slice(bottomsPos, bottomsPos + 1)\n\t\t\t\tsaveTemps.push(sid)\n\t\t\t\tsetSelectStyles(saveTemps)\n\t\t\t\tsetSelectStylesType([\"BOTTOMS\", type])\n\t\t\t\treturn\n\t\t\t}\n\t\t\tsetSelectStyles([sid])\n\t\t\tsetSelectStylesType([type])\n\t\t}\n\t}\n\treturn (\n\t\t<Flex flexDirection=\"column\">\n\t\t\t<Head showToast={showToast} toast={toast}></Head>\n\t\t\t<SelectBar></SelectBar>\n\t\t\t<Box mt=\"40px\" sx={{ position: \"relative\" }}>\n\t\t\t\t{categoryList.map((item, index) => (\n\t\t\t\t\t<SelectLine\n\t\t\t\t\t\tkey={index + item._id}\n\t\t\t\t\t\trow={index}\n\t\t\t\t\t\tkind={item.name}\n\t\t\t\t\t\tstyles={item.styles}\n\t\t\t\t\t\tselectStyles={selectStyles}\n\t\t\t\t\t\tonSelect={handleSelectStyle}\n\t\t\t\t\t></SelectLine>\n\t\t\t\t))}\n\t\t\t\t{/* <SelectLine\n\t\t\t\t\tkind=\"TOPS\"\n\t\t\t\t\tdata={[\"/3/1.png\", \"/3/1.png\", \"/3/1.png\", \"/3/1.png\"]}\n\t\t\t\t></SelectLine>\n\t\t\t\t<SelectLine\n\t\t\t\t\tkind=\"BOTTOMS\"\n\t\t\t\t\tdata={[\"/3/4.png\", \"/3/4.png\", \"/3/4.png\", \"/3/4.png\"]}\n\t\t\t\t></SelectLine>\n\t\t\t\t<SelectLine\n\t\t\t\t\tkind=\"TOPS\"\n\t\t\t\t\tdata={[\"/3/2.png\", \"/3/2.png\", \"/3/2.png\", \"/3/2.png\"]}\n\t\t\t\t></SelectLine> */}\n\t\t\t\t{currentSeleted && info.role === 1 ? (\n\t\t\t\t\t<SelectAssignTool\n\t\t\t\t\t\tcurrentSeleted={currentSeleted}\n\t\t\t\t\t\tonClose={() => {\n\t\t\t\t\t\t\tsetCurrentSeleted(false)\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t) : null}\n\t\t\t</Box>\n\t\t\t<Button\n\t\t\t\tvariant=\"primary\"\n\t\t\t\theight=\"1.13rem\"\n\t\t\t\twidth=\"19.2rem\"\n\t\t\t\tbg=\"#FF8E6C\"\n\t\t\t\tcolor=\"#000\"\n\t\t\t\tpadding=\"0\"\n\t\t\t\tsx={{\n\t\t\t\t\tborderRadius: 0,\n\t\t\t\t\tfontSize: \"0.27rem\",\n\t\t\t\t\tcursor: \"pointer\"\n\t\t\t\t}}\n\t\t\t\tonClick={() => {\n\t\t\t\t\t// console.log('selectStylesselectStylesselectStyles')\n\t\t\t\t\tif (selectStyles.length > 0) {\n\t\t\t\t\t\tRouter.push(\n\t\t\t\t\t\t\t`/made?id=${selectStyles[0]}${\n\t\t\t\t\t\t\t\tselectStyles.length > 1 ? \"&id1=\" + selectStyles[1] : \"\"\n\t\t\t\t\t\t\t}`\n\t\t\t\t\t\t)\n\t\t\t\t\t} else {\n\t\t\t\t\t\tRouter.push(\"/made\")\n\t\t\t\t\t\t// setToast({ type: \"error\", info: \"Please Select Style.\" })\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\tNEXT>\n\t\t\t</Button>\n\t\t</Flex>\n\t)\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAFA;AAGA;AAAA;AAHA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AAQA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAGA;AAAA;AACA;AAJA;AAGA;AACA;AAJA;AAAA;AAAA;AAAA;AACA;AADA;AACA;AADA;AAKA;AACA;AANA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAMA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AANA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAwBA;AACA;AACA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AAKA;AACA;AAEA;AACA;AAxBA;AAAA;AAAA;AAAA;AAAA;AAAA;AA8BA;;;;A","sourceRoot":""}