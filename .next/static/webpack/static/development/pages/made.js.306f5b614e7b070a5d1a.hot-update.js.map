{"version":3,"file":"static/webpack/static/development/pages/made.js.306f5b614e7b070a5d1a.hot-update.js","sources":["webpack:///./components/made-edit-box.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\"\n// import ReactSVG from \"../components/commons/react-svg\"\nimport StyleImg from \"../components/commons/style-img\"\nimport { Flex, Text, Box, Image, Button } from \"rebass\"\n\nimport Modal from \"./modal\"\nimport { ColorList, PaintList } from \"./color-and-paint\"\n\nimport request from \"../utils/request.js\"\nimport { baseUrl } from \"../utils/helper\"\nexport default props => {\n\tconst { styleDetails, curStyle, userInfo } = props\n\n\tlet tempSelectedIds = [curStyle[0].colors]\n\t// let tempSelectedImgs = [curStyle[0].imgUrl]\n\tif (curStyle.length > 1) {\n\t\ttempSelectedIds.push(curStyle[1].colors)\n\t\t// tempSelectedImgs.push(curStyle[1].imgUrl)\n\t} else {\n\t\ttempSelectedIds.push([])\n\t\t// tempSelectedImgs.push(false)\n\t}\n\tconst [curSelectedColors, setCurSelectedColors] = useState(tempSelectedIds)\n\tconst [curStyleIndex, setCurStyleIndex] = useState(0)\n\tconst [curStylesEditGroupIndex, setCurStylesEditGroupIndex] = useState([0, 0])\n\tconst [plainColors, setPlainColors] = useState({ docs: [] })\n\tconst [flowerColors, setFlowerColors] = useState({ docs: [] })\n\t// const [colorList, setColorList] = useState(styleDetails[0].plainColors)\n\tconst getColorList = async page => {\n\t\tconst req = await request(\n\t\t\t\"color/getList\",\n\t\t\t{ type: 0, page, limit: 14 },\n\t\t\t\"get\"\n\t\t)\n\t\tsetPlainColors(req)\n\t\t// console.log(\"getChannels\", req)\n\t}\n\tconst getPaintList = async page => {\n\t\tconst req = await request(\n\t\t\t\"color/getList\",\n\t\t\t{ type: 1, page, limit: 14 },\n\t\t\t\"get\"\n\t\t)\n\t\tsetFlowerColors(req)\n\t\t// console.log(\"getChannels\", req)\n\t}\n\n\tconst handleChangeColorPage = (page, type) => {\n\t\tconsole.log(page, type)\n\t\tif (type === 0) {\n\t\t\tgetColorList(page)\n\t\t} else {\n\t\t\tgetPaintList(page)\n\t\t}\n\t}\n\tconst handleSelect = item => {\n\t\tconsole.log(curSelectedColors)\n\t\tif (\n\t\t\tcurSelectedColors[curStyleIndex][curStylesEditGroupIndex] &&\n\t\t\titem._id === curSelectedColors[curStyleIndex][curStylesEditGroupIndex]._id\n\t\t) {\n\t\t} else {\n\t\t\tcurSelectedColors[curStyleIndex].splice(curStylesEditGroupIndex, 1, item)\n\t\t\t// console.log(curSelectedColors[curStyleIndex])\n\t\t\tsetCurSelectedColors([].concat(curSelectedColors))\n\t\t}\n\t}\n\n\tuseEffect(() => {\n\t\tconst getChannelsAssign = async (styleId, channelId) => {\n\t\t\tconst req = await request(\n\t\t\t\t\"channel/getAssign\",\n\t\t\t\t{\n\t\t\t\t\tstyleId,\n\t\t\t\t\tchannelId\n\t\t\t\t},\n\t\t\t\t\"get\"\n\t\t\t)\n\t\t\tif (!req) {\n\t\t\t\tsetPlainColors({\n\t\t\t\t\tdocs: [],\n\t\t\t\t\tpage: 1\n\t\t\t\t})\n\t\t\t\tsetFlowerColors({\n\t\t\t\t\tdocs: [],\n\t\t\t\t\tpage: 1\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\tsetPlainColors({\n\t\t\t\t\tdocs: req.plainColors,\n\t\t\t\t\tpage: 1\n\t\t\t\t})\n\t\t\t\tsetFlowerColors({\n\t\t\t\t\tdocs: req.flowerColors,\n\t\t\t\t\tpage: 1\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\n\t\tif (userInfo.role === 0) {\n\t\t\t// 客户\n\t\t\tgetChannelsAssign(sid, userInfo.channels[0])\n\t\t} else {\n\t\t\t// 产品经理\n\t\t\tgetColorList(1)\n\t\t\tgetPaintList(1)\n\t\t}\n\t}, [])\n\n\tuseEffect(() => {}, [])\n\treturn (\n\t\t<Modal onClose={props.onClose}>\n\t\t\t<Box width=\"14rem\" fontSize=\"0.18rem\" color=\"#000\">\n\t\t\t\t<Flex justifyContent=\"space-between\">\n\t\t\t\t\t<Flex\n\t\t\t\t\t\tflexDirection=\"column\"\n\t\t\t\t\t\talignItems=\"center\"\n\t\t\t\t\t\tjustifyContent=\"space-evenly\"\n\t\t\t\t\t\twidth=\"6.75rem\"\n\t\t\t\t\t\tsx={{\n\t\t\t\t\t\t\tcursor: \"pointer\"\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{Array.isArray(styleDetails) &&\n\t\t\t\t\t\t\tstyleDetails.map((style, index) => (\n\t\t\t\t\t\t\t\t<Flex\n\t\t\t\t\t\t\t\t\twidth=\"6.75rem\"\n\t\t\t\t\t\t\t\t\tpadding=\"1rem 0\"\n\t\t\t\t\t\t\t\t\talignItems=\"center\"\n\t\t\t\t\t\t\t\t\tjustifyContent=\"center\"\n\t\t\t\t\t\t\t\t\tsx={{\n\t\t\t\t\t\t\t\t\t\tposition: \"relative\",\n\t\t\t\t\t\t\t\t\t\tborder:\n\t\t\t\t\t\t\t\t\t\t\tcurStyleIndex === index\n\t\t\t\t\t\t\t\t\t\t\t\t? \"1px solid #000\"\n\t\t\t\t\t\t\t\t\t\t\t\t: \"1px solid #A0A0A0\"\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\tsetCurStyleIndex(index)\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<StyleImg\n\t\t\t\t\t\t\t\t\t\twidth=\"3.79rem\"\n\t\t\t\t\t\t\t\t\t\tcolors={curSelectedColors[index]}\n\t\t\t\t\t\t\t\t\t\tsvgId={style._id}\n\t\t\t\t\t\t\t\t\t\tstyleId={style._id}\n\t\t\t\t\t\t\t\t\t\tshadowUrl={style.shadowUrl}\n\t\t\t\t\t\t\t\t\t\tsvgUrl={style.svgUrl}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Flex>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t</Flex>\n\n\t\t\t\t\t<Flex flexDirection=\"column\" flexGrow={1} pl=\"0.6rem\">\n\t\t\t\t\t\t<Box width={[1]} mb=\"0.6rem\">\n\t\t\t\t\t\t\t<Text id=\"section\" fontSize=\"0.18rem\" fontWeight=\"bolder\">\n\t\t\t\t\t\t\t\tSECTION NUMBER\n\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t\t<Text fontSize=\"0.1rem\" m=\"0.16rem 0\">\n\t\t\t\t\t\t\t\t{styleDetails[curStyleIndex].styleNo}\n\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t<ColorList\n\t\t\t\t\t\t\tcolorList={plainColors.docs || []}\n\t\t\t\t\t\t\thandleSelect={handleSelect}\n\t\t\t\t\t\t\tcurChannelId={0}\n\t\t\t\t\t\t\tselectedList={[curSelectedColors[curStyleIndex] || {}]}\n\t\t\t\t\t\t\tpage={plainColors.page}\n\t\t\t\t\t\t\tonChangePage={handleChangeColorPage}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Box height=\"0.3rem\" width={[1]} />\n\t\t\t\t\t\t<PaintList\n\t\t\t\t\t\t\tpaintList={flowerColors.docs || []}\n\t\t\t\t\t\t\thandleSelect={handleSelect}\n\t\t\t\t\t\t\tcurChannelId={0}\n\t\t\t\t\t\t\tselectedList={[curSelectedColors[curStyleIndex] || {}]}\n\t\t\t\t\t\t\tpage={flowerColors.page}\n\t\t\t\t\t\t\tonChangePage={handleChangeColorPage}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\t\t\theight=\"0.7rem\"\n\t\t\t\t\t\t\twidth=\"100%\"\n\t\t\t\t\t\t\tbg=\"#1B1B1B\"\n\t\t\t\t\t\t\tcolor=\"#fff\"\n\t\t\t\t\t\t\tpadding=\"0\"\n\t\t\t\t\t\t\tmt=\"0.7rem\"\n\t\t\t\t\t\t\tsx={{\n\t\t\t\t\t\t\t\tborderRadius: 0,\n\t\t\t\t\t\t\t\tfontSize: \"0.14rem\",\n\t\t\t\t\t\t\t\tcursor: \"pointer\"\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tif (!curSelectedColors[0]) return\n\t\t\t\t\t\t\t\tif (styleDetails.length > 1 && !curSelectedColors[1]) return\n\t\t\t\t\t\t\t\tprops.confirmMade(curSelectedColors)\n\t\t\t\t\t\t\t\tprops.onClose()\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tFINISH\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Flex>\n\t\t\t\t</Flex>\n\t\t\t</Box>\n\t\t</Modal>\n\t)\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AAZA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAeA;AAAA;AAfA;AAAA;AACA;AADA;AAgBA;AAAA;AAhBA;AAAA;AACA;AACA;AAgBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AACA;AAJA;AACA;AAKA;AACA;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAQA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AACA;AAJA;AACA;AAKA;AACA;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AASA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AACA;AAFA;AACA;AAJA;AACA;AACA;AAOA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AAIA;AACA;AA5BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AA6BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AADA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAOA;AACA;AACA;AAdA;AAAA;AAAA;AAAA;AAAA;AAAA;AAiBA;AACA;AACA;AACA;AACA;AACA;AANA;AAAA;AAAA;AAAA;AAAA;AAAA;AAjBA;AA6BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AACA;AACA;AACA;AACA;AACA;AANA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AANA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AACA;AACA;AAlBA;AAAA;AAAA;AAAA;AAAA;AAAA;AA2BA;;;;A","sourceRoot":""}