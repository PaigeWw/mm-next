{"ast":null,"code":"import _Object$defineProperty from \"@babel/runtime-corejs2/core-js/object/define-property\";\nimport _Object$defineProperties from \"@babel/runtime-corejs2/core-js/object/define-properties\";\nimport _Object$getOwnPropertyDescriptors from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors\";\nimport _Object$getOwnPropertyDescriptor from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor\";\nimport _Object$getOwnPropertySymbols from \"@babel/runtime-corejs2/core-js/object/get-own-property-symbols\";\nimport _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nvar _jsxFileName = \"/Users/paige/Desktop/workspace/mm-next/components/tables/collect-table.js\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = _Object$keys(object); if (_Object$getOwnPropertySymbols) { var symbols = _Object$getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return _Object$getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (_Object$getOwnPropertyDescriptors) { _Object$defineProperties(target, _Object$getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { _Object$defineProperty(target, key, _Object$getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect } from \"react\";\nimport { Flex, Text, Box, Button, Row, Column } from \"rebass\";\nimport Table, { TableLine, ProductInfo } from \"./base-table\";\nimport EditBox from \"../made-edit-box\";\nimport StyleItem from \"../commons/min-style-item\";\nimport request from \"../../utils/request\";\nexport default (function (props) {\n  var _useState = useState(false),\n      showEditBox = _useState[0],\n      setShowEditBox = _useState[1];\n\n  var _useState2 = useState(0),\n      editIndex = _useState2[0],\n      setEditIndex = _useState2[1]; // const mode = \"POSITIVE\"\n\n\n  var _useState3 = useState([]),\n      collectList = _useState3[0],\n      setCollectList = _useState3[1];\n\n  var _useState4 = useState([]),\n      collectDetailsList = _useState4[0],\n      setCollectDetailsList = _useState4[1];\n\n  var _useState5 = useState([]),\n      selectList = _useState5[0],\n      setSelectList = _useState5[1];\n\n  var getCollectList =\n  /*#__PURE__*/\n  function () {\n    var _ref = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var res, data;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return request(\"/user/getFavoriteList\");\n\n            case 2:\n              res = _context.sent;\n\n              if (res) {\n                _context.next = 5;\n                break;\n              }\n\n              return _context.abrupt(\"return\");\n\n            case 5:\n              data = res.map(function (item) {\n                var prodInfo = [];\n                var price = [];\n                var styleList = [];\n                var colorInfo = []; // let colorInfo = []\n\n                var date = [];\n                var details = [];\n                var threeViews = item.styleAndColor.map(function (x) {\n                  details.push(x.style);\n                  prodInfo.push({\n                    styleNo: x.style.styleNo,\n                    id: x.style._id\n                  });\n                  price.push(x.style.price);\n                  date.push(x.style.updateTime);\n                  colorInfo.push(x.colorIds); // let positive = x.\n\n                  styleList.push({\n                    style: x.style,\n                    colors: x.colorIds\n                  });\n                  return {\n                    POSITIVE: x.front\n                  };\n                });\n                collectDetailsList.push(details);\n                setCollectDetailsList([].concat(collectDetailsList));\n                return {\n                  id: item._id,\n                  colorInfo: colorInfo,\n                  threeViews: threeViews,\n                  prodInfo: prodInfo,\n                  price: price,\n                  styleList: styleList,\n                  date: date\n                };\n              });\n              setCollectList(data);\n\n            case 7:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function getCollectList() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    getCollectList();\n  }, []);\n\n  var handleSelect = function handleSelect(index, item) {\n    var pos = selectList.findIndex(function (x) {\n      return x.index === index;\n    });\n\n    if (pos < 0) {\n      selectList.push(_objectSpread({\n        index: index\n      }, item, {\n        details: collectDetailsList[index]\n      }));\n    } else {\n      selectList.splice(pos, 1);\n    }\n\n    setSelectList([].concat(selectList));\n  };\n\n  var handleDel =\n  /*#__PURE__*/\n  function () {\n    var _ref2 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee2(index, item) {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              console.log(item);\n              _context2.next = 3;\n              return request(\"/user/deleteFavorite\", {\n                _id: item.id\n              }, \"post\");\n\n            case 3:\n              res = _context2.sent;\n\n              // console.log(\"res\", res)\n              if (res) {\n                console.log(\"删除他，嘿嘿嘿\");\n                collectList.splice(index, 1);\n                setCollectList([].concat(collectList));\n              }\n\n            case 5:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function handleDel(_x, _x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var handleConfirmMade =\n  /*#__PURE__*/\n  function () {\n    var _ref3 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee3(colorIds, imgUrls) {\n      var params, res;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              if (colorIds[0]) {\n                _context3.next = 2;\n                break;\n              }\n\n              return _context3.abrupt(\"return\");\n\n            case 2:\n              params = [{\n                styleId: collectList[editIndex].prodInfo[0].id,\n                colorId: colorIds[0]\n              }];\n\n              if (collectList[editIndex].length > 1) {\n                // if (! > 2) return\n                params.push({\n                  styleId: collectList[editIndex].prodInfo[1].id,\n                  colorId: colorIds[1]\n                });\n              }\n\n              _context3.next = 6;\n              return request(\"/user/updateFavorite\", {\n                _id: collectList[editIndex].id,\n                styleAndColor: params\n              }, \"post\");\n\n            case 6:\n              res = _context3.sent;\n\n              // setStyleDetails([].concat(styleDetails))\n              if (res) {\n                getCollectList();\n              }\n\n            case 8:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function handleConfirmMade(_x3, _x4) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  console.log(\"collectList\", collectList);\n  return collectList.length > 0 ? __jsx(Flex, {\n    flexDirection: \"column\",\n    justifyContent: \"space-between\",\n    sx: {\n      cursor: \"pointer\",\n      height: \"100%\",\n      background: \"#FFF0E5\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  }, __jsx(Table, {\n    titles: [{\n      name: \"00\",\n      width: \"2/22\",\n      isHide: true\n    }, {\n      name: \"PICTRUE\",\n      width: \"2/22\"\n    }, {\n      name: \"PRODUCT INFOMATION\",\n      width: \"4/22\"\n    }, {\n      name: \"PRICE\",\n      width: \"1/22\"\n    }, {\n      name: \"DATE\",\n      width: \"2/22\"\n    }, {\n      name: \"STYLE\",\n      width: \"1/22\"\n    }, {\n      name: \"EDIT\",\n      width: \"5/22\"\n    }],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117\n    },\n    __self: this\n  }, collectList.map(function (collect, index) {\n    return __jsx(TableLine, {\n      isSelect: selectList.findIndex(function (x) {\n        return index === x.index;\n      }) >= 0,\n      haveSelect: true,\n      onSelect: function onSelect() {\n        handleSelect(index, collect);\n      },\n      haveDel: true,\n      onDel: function onDel() {\n        handleDel(index, collect);\n      },\n      haveEdit: true,\n      onEdit: function onEdit() {\n        setEditIndex(index);\n        setShowEditBox(true);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, __jsx(Text, {\n      style: {\n        position: \"absolute\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, index + 1), __jsx(StyleItem, {\n      key: \"\".concat(index, \"-style-img\"),\n      styleList: collect.styleList,\n      index: index,\n      tool: false,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }), __jsx(Flex, {\n      justifyContent: \"center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, __jsx(Box, {\n      margin: \"8px 0\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, collect.prodInfo.map(function (prodInfo) {\n      return __jsx(ProductInfo, {\n        styleNum: prodInfo.styleNo,\n        made: \"2110 YE GREEN/2001 YE GREEN\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      });\n    }))), __jsx(Flex, {\n      flexDirection: \"column\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, collect.price.map(function (price) {\n      return __jsx(Text, {\n        p: \"4px 0\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }, price);\n    })), __jsx(Flex, {\n      flexDirection: \"column\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }, collect.date.map(function (date) {\n      return __jsx(Text, {\n        p: \"4px 0\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }, date);\n    })), __jsx(Flex, {\n      flexDirection: \"column\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, __jsx(Text, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }, \"TOPS\"), __jsx(Text, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }, \"BOTTOMS\")));\n  })), __jsx(Button, {\n    variant: \"primary\",\n    height: \"1.13rem\",\n    width: \"19.2rem\",\n    bg: \"#000\",\n    color: \"#fff\",\n    padding: \"0\",\n    sx: {\n      borderRadius: 0,\n      fontSize: \"0.27rem\",\n      cursor: \"pointer\"\n    },\n    onClick: function onClick() {\n      props.nextStep(selectList);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182\n    },\n    __self: this\n  }, \"GENERATE ORDERS\"), showEditBox ? __jsx(EditBox, {\n    styleDetails: collectDetailsList[editIndex],\n    curStyle: collectList[editIndex].colorInfo,\n    confirmMade: handleConfirmMade,\n    onClose: function onClose() {\n      setShowEditBox(false);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201\n    },\n    __self: this\n  }) : null) : null;\n});","map":{"version":3,"sources":["/Users/paige/Desktop/workspace/mm-next/components/tables/collect-table.js"],"names":["React","useState","useEffect","Flex","Text","Box","Button","Row","Column","Table","TableLine","ProductInfo","EditBox","StyleItem","request","props","showEditBox","setShowEditBox","editIndex","setEditIndex","collectList","setCollectList","collectDetailsList","setCollectDetailsList","selectList","setSelectList","getCollectList","res","data","map","item","prodInfo","price","styleList","colorInfo","date","details","threeViews","styleAndColor","x","push","style","styleNo","id","_id","updateTime","colorIds","colors","POSITIVE","front","concat","handleSelect","index","pos","findIndex","splice","handleDel","console","log","handleConfirmMade","imgUrls","params","styleId","colorId","length","cursor","height","background","name","width","isHide","collect","position","borderRadius","fontSize","nextStep"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\"\nimport { Flex, Text, Box, Button, Row, Column } from \"rebass\"\nimport Table, { TableLine, ProductInfo } from \"./base-table\"\n\nimport EditBox from \"../made-edit-box\"\nimport StyleItem from \"../commons/min-style-item\"\nimport request from \"../../utils/request\"\nexport default props => {\n\tconst [showEditBox, setShowEditBox] = useState(false)\n\tconst [editIndex, setEditIndex] = useState(0)\n\t// const mode = \"POSITIVE\"\n\tconst [collectList, setCollectList] = useState([])\n\tconst [collectDetailsList, setCollectDetailsList] = useState([])\n\tconst [selectList, setSelectList] = useState([])\n\tconst getCollectList = async () => {\n\t\tconst res = await request(\"/user/getFavoriteList\")\n\t\t// console.log(\"----res----\", res)\n\t\tif (!res) return\n\t\tconst data = res.map(item => {\n\t\t\tlet prodInfo = []\n\t\t\tlet price = []\n\t\t\tlet styleList = []\n\t\t\tlet colorInfo = []\n\t\t\t// let colorInfo = []\n\t\t\tlet date = []\n\t\t\tlet details = []\n\t\t\tlet threeViews = item.styleAndColor.map(x => {\n\t\t\t\tdetails.push(x.style)\n\t\t\t\tprodInfo.push({\n\t\t\t\t\tstyleNo: x.style.styleNo,\n\t\t\t\t\tid: x.style._id\n\t\t\t\t})\n\t\t\t\tprice.push(x.style.price)\n\t\t\t\tdate.push(x.style.updateTime)\n\t\t\t\tcolorInfo.push(x.colorIds)\n\t\t\t\t// let positive = x.\n\t\t\t\tstyleList.push({ style: x.style, colors: x.colorIds })\n\t\t\t\treturn { POSITIVE: x.front }\n\t\t\t})\n\t\t\tcollectDetailsList.push(details)\n\t\t\tsetCollectDetailsList([].concat(collectDetailsList))\n\t\t\treturn {\n\t\t\t\tid: item._id,\n\t\t\t\tcolorInfo,\n\t\t\t\tthreeViews,\n\t\t\t\tprodInfo,\n\t\t\t\tprice,\n\t\t\t\tstyleList,\n\t\t\t\tdate\n\t\t\t}\n\t\t})\n\t\tsetCollectList(data)\n\t}\n\n\tuseEffect(() => {\n\t\tgetCollectList()\n\t}, [])\n\n\tconst handleSelect = (index, item) => {\n\t\tconst pos = selectList.findIndex(x => x.index === index)\n\t\tif (pos < 0) {\n\t\t\tselectList.push({ index, ...item, details: collectDetailsList[index] })\n\t\t} else {\n\t\t\tselectList.splice(pos, 1)\n\t\t}\n\t\tsetSelectList([].concat(selectList))\n\t}\n\n\tconst handleDel = async (index, item) => {\n\t\tconsole.log(item)\n\t\tconst res = await request(\"/user/deleteFavorite\", { _id: item.id }, \"post\")\n\t\t// console.log(\"res\", res)\n\t\tif (res) {\n\t\t\tconsole.log(\"删除他，嘿嘿嘿\")\n\t\t\tcollectList.splice(index, 1)\n\t\t\tsetCollectList([].concat(collectList))\n\t\t}\n\t}\n\tconst handleConfirmMade = async (colorIds, imgUrls) => {\n\t\t// const res = await request(\"/user/updateFavorite\", {  }, \"post\")\n\t\tif (!colorIds[0]) return\n\t\tlet params = [\n\t\t\t{\n\t\t\t\tstyleId: collectList[editIndex].prodInfo[0].id,\n\t\t\t\tcolorId: colorIds[0]\n\t\t\t}\n\t\t]\n\n\t\tif (collectList[editIndex].length > 1) {\n\t\t\t// if (! > 2) return\n\t\t\tparams.push({\n\t\t\t\tstyleId: collectList[editIndex].prodInfo[1].id,\n\t\t\t\tcolorId: colorIds[1]\n\t\t\t})\n\t\t}\n\t\tconst res = await request(\n\t\t\t\"/user/updateFavorite\",\n\t\t\t{ _id: collectList[editIndex].id, styleAndColor: params },\n\t\t\t\"post\"\n\t\t)\n\t\t// setStyleDetails([].concat(styleDetails))\n\t\tif (res) {\n\t\t\tgetCollectList()\n\t\t}\n\t}\n\tconsole.log(\"collectList\", collectList)\n\treturn collectList.length > 0 ? (\n\t\t<Flex\n\t\t\tflexDirection=\"column\"\n\t\t\tjustifyContent=\"space-between\"\n\t\t\tsx={{\n\t\t\t\tcursor: \"pointer\",\n\t\t\t\theight: \"100%\",\n\t\t\t\tbackground: \"#FFF0E5\"\n\t\t\t}}\n\t\t>\n\t\t\t<Table\n\t\t\t\ttitles={[\n\t\t\t\t\t{ name: \"00\", width: \"2/22\", isHide: true },\n\t\t\t\t\t{ name: \"PICTRUE\", width: \"2/22\" },\n\t\t\t\t\t{ name: \"PRODUCT INFOMATION\", width: \"4/22\" },\n\t\t\t\t\t{ name: \"PRICE\", width: \"1/22\" },\n\t\t\t\t\t{ name: \"DATE\", width: \"2/22\" },\n\t\t\t\t\t{ name: \"STYLE\", width: \"1/22\" },\n\t\t\t\t\t{ name: \"EDIT\", width: \"5/22\" }\n\t\t\t\t]}\n\t\t\t>\n\t\t\t\t{collectList.map((collect, index) => (\n\t\t\t\t\t<TableLine\n\t\t\t\t\t\tisSelect={selectList.findIndex(x => index === x.index) >= 0}\n\t\t\t\t\t\thaveSelect\n\t\t\t\t\t\tonSelect={() => {\n\t\t\t\t\t\t\thandleSelect(index, collect)\n\t\t\t\t\t\t}}\n\t\t\t\t\t\thaveDel\n\t\t\t\t\t\tonDel={() => {\n\t\t\t\t\t\t\thandleDel(index, collect)\n\t\t\t\t\t\t}}\n\t\t\t\t\t\thaveEdit\n\t\t\t\t\t\tonEdit={() => {\n\t\t\t\t\t\t\tsetEditIndex(index)\n\t\t\t\t\t\t\tsetShowEditBox(true)\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Text style={{ position: \"absolute\" }}>{index + 1}</Text>\n\t\t\t\t\t\t<StyleItem\n\t\t\t\t\t\t\tkey={`${index}-style-img`}\n\t\t\t\t\t\t\tstyleList={collect.styleList}\n\t\t\t\t\t\t\tindex={index}\n\t\t\t\t\t\t\ttool={false}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{/* <Text>loading</Text> */}\n\t\t\t\t\t\t<Flex justifyContent=\"center\">\n\t\t\t\t\t\t\t<Box margin=\"8px 0\">\n\t\t\t\t\t\t\t\t{collect.prodInfo.map(prodInfo => (\n\t\t\t\t\t\t\t\t\t<ProductInfo\n\t\t\t\t\t\t\t\t\t\tstyleNum={prodInfo.styleNo}\n\t\t\t\t\t\t\t\t\t\tmade=\"2110 YE GREEN/2001 YE GREEN\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t))}\n\n\t\t\t\t\t\t\t\t{/* <ProductInfo styleNum=\"VERSION K2009\" made=\"2110 YE GREEN\" /> */}\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t</Flex>\n\t\t\t\t\t\t<Flex flexDirection=\"column\">\n\t\t\t\t\t\t\t{collect.price.map(price => (\n\t\t\t\t\t\t\t\t<Text p=\"4px 0\">{price}</Text>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</Flex>\n\t\t\t\t\t\t<Flex flexDirection=\"column\">\n\t\t\t\t\t\t\t{collect.date.map(date => (\n\t\t\t\t\t\t\t\t<Text p=\"4px 0\">{date}</Text>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</Flex>\n\t\t\t\t\t\t<Flex flexDirection=\"column\">\n\t\t\t\t\t\t\t<Text>TOPS</Text>\n\t\t\t\t\t\t\t<Text>BOTTOMS</Text>\n\t\t\t\t\t\t</Flex>\n\t\t\t\t\t</TableLine>\n\t\t\t\t))}\n\t\t\t</Table>\n\t\t\t<Button\n\t\t\t\tvariant=\"primary\"\n\t\t\t\theight=\"1.13rem\"\n\t\t\t\twidth=\"19.2rem\"\n\t\t\t\tbg=\"#000\"\n\t\t\t\tcolor=\"#fff\"\n\t\t\t\tpadding=\"0\"\n\t\t\t\tsx={{\n\t\t\t\t\tborderRadius: 0,\n\t\t\t\t\tfontSize: \"0.27rem\",\n\t\t\t\t\tcursor: \"pointer\"\n\t\t\t\t}}\n\t\t\t\tonClick={() => {\n\t\t\t\t\tprops.nextStep(selectList)\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\tGENERATE ORDERS\n\t\t\t</Button>\n\t\t\t{showEditBox ? (\n\t\t\t\t<EditBox\n\t\t\t\t\tstyleDetails={collectDetailsList[editIndex]}\n\t\t\t\t\tcurStyle={collectList[editIndex].colorInfo}\n\t\t\t\t\tconfirmMade={handleConfirmMade}\n\t\t\t\t\tonClose={() => {\n\t\t\t\t\t\tsetShowEditBox(false)\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t) : null}\n\t\t</Flex>\n\t) : null\n}\n"]},"metadata":{},"sourceType":"module"}