{"ast":null,"code":"import _Object$defineProperty from \"@babel/runtime-corejs2/core-js/object/define-property\";\nimport _Object$defineProperties from \"@babel/runtime-corejs2/core-js/object/define-properties\";\nimport _Object$getOwnPropertyDescriptors from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors\";\nimport _Object$getOwnPropertyDescriptor from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor\";\nimport _Object$getOwnPropertySymbols from \"@babel/runtime-corejs2/core-js/object/get-own-property-symbols\";\nimport _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _parseInt from \"@babel/runtime-corejs2/core-js/parse-int\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/paige/Desktop/workspace/mm-next/components/tables/order-table.js\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = _Object$keys(object); if (_Object$getOwnPropertySymbols) { var symbols = _Object$getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return _Object$getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (_Object$getOwnPropertyDescriptors) { _Object$defineProperties(target, _Object$getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { _Object$defineProperty(target, key, _Object$getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect } from \"react\";\nimport { Flex, Text, Box, Button, Row, Column } from \"rebass\";\nimport Table, { TableLine, ProductInfo } from \"./base-table\";\nimport ShowStyle from \"../show-style\";\nimport InputNumber from \"../number-input\";\nimport request from \"../../utils/request\";\nexport default (function (props) {\n  var selectStyles = props.selectStyles;\n  var line = props.selectStyles.length;\n  console.log(selectStyles);\n  var initData = selectStyles.map(function (x) {\n    var sizeInfo = x.details[0].size.values.map(function (item) {\n      return _objectSpread({}, item, {\n        num: 0\n      });\n    });\n    console.log();\n    return {\n      favoriteId: x.id,\n      sizeInfo: sizeInfo,\n      total: 0,\n      signalPrice: x.details[0].price + (x.details.length > 1 ? x.details[1].price : 0)\n    };\n  });\n\n  var _useState = useState(initData),\n      orderData = _useState[0],\n      setOrderData = _useState[1];\n\n  var _useState2 = useState(1),\n      packageCount = _useState2[0],\n      setPackageCount = _useState2[1];\n\n  var handleChangePackageCount = function handleChangePackageCount(num) {\n    if (num < 1) return;\n    setPackageCount(num);\n    orderData.map(function (order, index) {\n      order.total = getItemsTotal(index) * num;\n    });\n    setOrderData([].concat(orderData));\n  };\n\n  var handleChangeOrder = function handleChangeOrder(styleIndex, sizeIndex, num) {\n    console.log(num);\n    if (num < 0) return;\n    orderData[styleIndex].sizeInfo[sizeIndex].num = _parseInt(num, 10);\n    var allNumSum = getItemsTotal(styleIndex);\n    console.log(\"handleChangeOrder:\".concat(allNumSum, \"*\").concat(packageCount, \"*\").concat(orderData[styleIndex].signalPrice, \"=\").concat(allNumSum * packageCount * orderData[styleIndex].signalPrice));\n    orderData[styleIndex].total = allNumSum * packageCount;\n    setOrderData([].concat(orderData)); // console.log(\"orderData\", orderData)\n  };\n\n  var getItemsTotal = function getItemsTotal(index) {\n    if (index < orderData.length) {\n      var count = 0;\n      orderData[index].sizeInfo.map(function (size) {\n        count += size.num;\n      });\n      return count;\n    }\n  };\n\n  var handleSubmitOrder =\n  /*#__PURE__*/\n  function () {\n    var _ref = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return request(\"/order/add\", {\n                packageCount: packageCount,\n                orderData: orderData\n              }, \"post\");\n\n            case 2:\n              res = _context.sent;\n\n              if (res) {\n                props.nextStep();\n              }\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleSubmitOrder() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(Flex, {\n    flexDirection: \"column\",\n    justifyContent: \"space-between\",\n    sx: {\n      cursor: \"pointer\",\n      height: \"100%\",\n      background: \"#FFF0E5\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }, __jsx(Box, {\n    sx: {\n      padding: \"0 18px 18px 18px\",\n      height: \"max-content\",\n      display: \"table\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, __jsx(Table, {\n    sx: {\n      margin: \"0\",\n      marginRight: \"1px\",\n      width: \"100%\"\n    },\n    titles: [{\n      name: \"00\",\n      width: \"2/22\",\n      isHide: true\n    }, {\n      name: \"SECTION NUMBER\",\n      width: \"2/22\"\n    }, {\n      name: \"COLOUR\",\n      width: \"4/22\"\n    }, {\n      name: \"IMAGE\",\n      width: \"1/22\"\n    }, {\n      name: \"SIZE\",\n      width: \"2/22\"\n    }, {\n      name: \"PACKAGES\",\n      width: \"2/22\"\n    }, {\n      name: \"QUANTITY\",\n      width: \"2/22\"\n    }, {\n      name: \"PRICE\",\n      width: \"4/22\"\n    }, {\n      name: \"TOTAL AMOUN\",\n      width: \"1/22\"\n    }, {\n      name: \"DELETE\",\n      width: \"2/22\"\n    }],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }, selectStyles.map(function (collect, index) {\n    return __jsx(TableLine, {\n      haveDel: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, __jsx(Text, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, index), __jsx(ProductInfo, {\n      styleNum: \"XSJHFH00928\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }), __jsx(Flex, {\n      flexDirection: \"column\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, __jsx(ProductInfo, {\n      made: \"2110 YE GREEN\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }), __jsx(ProductInfo, {\n      made: \"2110 YE GREEN\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    })), __jsx(ShowStyle, {\n      key: collect.id,\n      imgWidth: \"0.95rem\",\n      mode: \"POSITIVE\",\n      threeViews: collect.threeViews,\n      border: \"none\",\n      hideInfo: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }), __jsx(Flex, {\n      justifyContent: \"space-between\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, collect.details[0].size.values.map(function (size, sizeIndex) {\n      return __jsx(Flex, {\n        flexDirection: \"column\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, __jsx(Text, {\n        mr: \"10px\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, size.name), __jsx(InputNumber, {\n        value: orderData[index].sizeInfo[sizeIndex].num,\n        onChange: function onChange(num) {\n          handleChangeOrder(index, sizeIndex, num);\n          console.log(collect.id, size.name, num);\n        },\n        upValue: function upValue() {\n          handleChangeOrder(index, sizeIndex, orderData[index].sizeInfo[sizeIndex].num + 1);\n        },\n        downValue: function downValue() {\n          handleChangeOrder(index, sizeIndex, orderData[index].sizeInfo[sizeIndex].num - 1);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }));\n    })), index > 0 ? null : __jsx(Flex, {\n      rowspan: line,\n      hasBorder: \"1px solid\",\n      justifyContent: \"center\",\n      alignItems: \"center\",\n      sx: {\n        width: \"100%\",\n        height: \"100%\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }, __jsx(InputNumber, {\n      value: packageCount,\n      onChange: function onChange(num) {\n        handleChangePackageCount(num == \"\" || !num ? 0 : _parseInt(num));\n      },\n      upValue: function upValue() {\n        handleChangePackageCount(packageCount + 1);\n      },\n      downValue: function downValue() {\n        handleChangePackageCount(packageCount - 1);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    })), __jsx(Text, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }, orderData[index].total), __jsx(Flex, {\n      flexDirection: \"column\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }, orderData[index].signalPrice), __jsx(Text, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, orderData[index].signalPrice * orderData[index].total * packageCount));\n  }))), __jsx(Button, {\n    variant: \"primary\",\n    height: \"1.13rem\",\n    width: \"19.2rem\",\n    bg: \"#000\",\n    color: \"#fff\",\n    padding: \"0\",\n    sx: {\n      borderRadius: 0,\n      fontSize: \"0.27rem\",\n      cursor: \"pointer\"\n    },\n    onClick: handleSubmitOrder,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188\n    },\n    __self: this\n  }, \"COMPLETE\"));\n});","map":{"version":3,"sources":["/Users/paige/Desktop/workspace/mm-next/components/tables/order-table.js"],"names":["React","useState","useEffect","Flex","Text","Box","Button","Row","Column","Table","TableLine","ProductInfo","ShowStyle","InputNumber","request","props","selectStyles","line","length","console","log","initData","map","x","sizeInfo","details","size","values","item","num","favoriteId","id","total","signalPrice","price","orderData","setOrderData","packageCount","setPackageCount","handleChangePackageCount","order","index","getItemsTotal","concat","handleChangeOrder","styleIndex","sizeIndex","allNumSum","count","handleSubmitOrder","res","nextStep","cursor","height","background","padding","display","margin","marginRight","width","name","isHide","collect","threeViews","borderRadius","fontSize"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\"\nimport { Flex, Text, Box, Button, Row, Column } from \"rebass\"\nimport Table, { TableLine, ProductInfo } from \"./base-table\"\nimport ShowStyle from \"../show-style\"\nimport InputNumber from \"../number-input\"\nimport request from \"../../utils/request\"\n\nexport default props => {\n\tconst { selectStyles } = props\n\tconst line = props.selectStyles.length\n\tconsole.log(selectStyles)\n\tconst initData = selectStyles.map(x => {\n\t\tlet sizeInfo = x.details[0].size.values.map(item => ({ ...item, num: 0 }))\n\t\tconsole.log()\n\t\treturn {\n\t\t\tfavoriteId: x.id,\n\t\t\tsizeInfo: sizeInfo,\n\t\t\ttotal: 0,\n\t\t\tsignalPrice:\n\t\t\t\tx.details[0].price + (x.details.length > 1 ? x.details[1].price : 0)\n\t\t}\n\t})\n\tconst [orderData, setOrderData] = useState(initData)\n\tconst [packageCount, setPackageCount] = useState(1)\n\tconst handleChangePackageCount = num => {\n\t\tif (num < 1) return\n\t\tsetPackageCount(num)\n\t\torderData.map((order, index) => {\n\t\t\torder.total = getItemsTotal(index) * num\n\t\t})\n\t\tsetOrderData([].concat(orderData))\n\t}\n\tconst handleChangeOrder = (styleIndex, sizeIndex, num) => {\n\t\tconsole.log(num)\n\t\tif (num < 0) return\n\t\torderData[styleIndex].sizeInfo[sizeIndex].num = parseInt(num, 10)\n\t\tlet allNumSum = getItemsTotal(styleIndex)\n\t\tconsole.log(\n\t\t\t`handleChangeOrder:${allNumSum}*${packageCount}*${\n\t\t\t\torderData[styleIndex].signalPrice\n\t\t\t}=${allNumSum * packageCount * orderData[styleIndex].signalPrice}`\n\t\t)\n\t\torderData[styleIndex].total = allNumSum * packageCount\n\t\tsetOrderData([].concat(orderData))\n\t\t// console.log(\"orderData\", orderData)\n\t}\n\tconst getItemsTotal = index => {\n\t\tif (index < orderData.length) {\n\t\t\tlet count = 0\n\t\t\torderData[index].sizeInfo.map(size => {\n\t\t\t\tcount += size.num\n\t\t\t})\n\t\t\treturn count\n\t\t}\n\t}\n\n\tconst handleSubmitOrder = async () => {\n\t\tconst res = await request(\n\t\t\t\"/order/add\",\n\t\t\t{\n\t\t\t\tpackageCount,\n\t\t\t\torderData\n\t\t\t},\n\t\t\t\"post\"\n\t\t)\n\t\tif (res) {\n\t\t\tprops.nextStep()\n\t\t}\n\t}\n\treturn (\n\t\t<Flex\n\t\t\tflexDirection=\"column\"\n\t\t\tjustifyContent=\"space-between\"\n\t\t\tsx={{\n\t\t\t\tcursor: \"pointer\",\n\t\t\t\theight: \"100%\",\n\t\t\t\tbackground: \"#FFF0E5\"\n\t\t\t}}\n\t\t>\n\t\t\t<Box\n\t\t\t\tsx={{\n\t\t\t\t\tpadding: \"0 18px 18px 18px\",\n\t\t\t\t\theight: \"max-content\",\n\t\t\t\t\tdisplay: \"table\"\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<Table\n\t\t\t\t\tsx={{ margin: \"0\", marginRight: \"1px\", width: \"100%\" }}\n\t\t\t\t\ttitles={[\n\t\t\t\t\t\t{ name: \"00\", width: \"2/22\", isHide: true },\n\t\t\t\t\t\t{ name: \"SECTION NUMBER\", width: \"2/22\" },\n\t\t\t\t\t\t{ name: \"COLOUR\", width: \"4/22\" },\n\t\t\t\t\t\t{ name: \"IMAGE\", width: \"1/22\" },\n\t\t\t\t\t\t{ name: \"SIZE\", width: \"2/22\" },\n\t\t\t\t\t\t{ name: \"PACKAGES\", width: \"2/22\" },\n\t\t\t\t\t\t{ name: \"QUANTITY\", width: \"2/22\" },\n\t\t\t\t\t\t{ name: \"PRICE\", width: \"4/22\" },\n\t\t\t\t\t\t{ name: \"TOTAL AMOUN\", width: \"1/22\" },\n\t\t\t\t\t\t{ name: \"DELETE\", width: \"2/22\" }\n\t\t\t\t\t]}\n\t\t\t\t>\n\t\t\t\t\t{selectStyles.map((collect, index) => (\n\t\t\t\t\t\t<TableLine haveDel>\n\t\t\t\t\t\t\t<Text>{index}</Text>\n\t\t\t\t\t\t\t<ProductInfo styleNum=\"XSJHFH00928\" />\n\t\t\t\t\t\t\t<Flex flexDirection=\"column\">\n\t\t\t\t\t\t\t\t<ProductInfo made=\"2110 YE GREEN\" />\n\t\t\t\t\t\t\t\t<ProductInfo made=\"2110 YE GREEN\" />\n\t\t\t\t\t\t\t</Flex>\n\t\t\t\t\t\t\t<ShowStyle\n\t\t\t\t\t\t\t\tkey={collect.id}\n\t\t\t\t\t\t\t\timgWidth=\"0.95rem\"\n\t\t\t\t\t\t\t\tmode={\"POSITIVE\"}\n\t\t\t\t\t\t\t\tthreeViews={collect.threeViews}\n\t\t\t\t\t\t\t\tborder=\"none\"\n\t\t\t\t\t\t\t\thideInfo\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Flex justifyContent=\"space-between\">\n\t\t\t\t\t\t\t\t{collect.details[0].size.values.map((size, sizeIndex) => (\n\t\t\t\t\t\t\t\t\t<Flex flexDirection=\"column\">\n\t\t\t\t\t\t\t\t\t\t<Text mr=\"10px\">{size.name}</Text>\n\t\t\t\t\t\t\t\t\t\t<InputNumber\n\t\t\t\t\t\t\t\t\t\t\tvalue={orderData[index].sizeInfo[sizeIndex].num}\n\t\t\t\t\t\t\t\t\t\t\tonChange={num => {\n\t\t\t\t\t\t\t\t\t\t\t\thandleChangeOrder(index, sizeIndex, num)\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(collect.id, size.name, num)\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\tupValue={() => {\n\t\t\t\t\t\t\t\t\t\t\t\thandleChangeOrder(\n\t\t\t\t\t\t\t\t\t\t\t\t\tindex,\n\t\t\t\t\t\t\t\t\t\t\t\t\tsizeIndex,\n\t\t\t\t\t\t\t\t\t\t\t\t\torderData[index].sizeInfo[sizeIndex].num + 1\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\tdownValue={() => {\n\t\t\t\t\t\t\t\t\t\t\t\thandleChangeOrder(\n\t\t\t\t\t\t\t\t\t\t\t\t\tindex,\n\t\t\t\t\t\t\t\t\t\t\t\t\tsizeIndex,\n\t\t\t\t\t\t\t\t\t\t\t\t\torderData[index].sizeInfo[sizeIndex].num - 1\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Flex>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t{/* {console.log(collect.details[0].size)}\n\t\t\t\t\t\t\t\t<Flex flexDirection=\"column\">\n\t\t\t\t\t\t\t\t\t<Text mr=\"10px\">S</Text>\n\t\t\t\t\t\t\t\t\t<InputNumber />\n\t\t\t\t\t\t\t\t</Flex> */}\n\t\t\t\t\t\t\t</Flex>\n\t\t\t\t\t\t\t{index > 0 ? null : (\n\t\t\t\t\t\t\t\t<Flex\n\t\t\t\t\t\t\t\t\trowspan={line}\n\t\t\t\t\t\t\t\t\thasBorder={\"1px solid\"}\n\t\t\t\t\t\t\t\t\tjustifyContent=\"center\"\n\t\t\t\t\t\t\t\t\talignItems=\"center\"\n\t\t\t\t\t\t\t\t\tsx={{ width: \"100%\", height: \"100%\" }}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<InputNumber\n\t\t\t\t\t\t\t\t\t\tvalue={packageCount}\n\t\t\t\t\t\t\t\t\t\tonChange={num => {\n\t\t\t\t\t\t\t\t\t\t\thandleChangePackageCount(\n\t\t\t\t\t\t\t\t\t\t\t\tnum == \"\" || !num ? 0 : parseInt(num)\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tupValue={() => {\n\t\t\t\t\t\t\t\t\t\t\thandleChangePackageCount(packageCount + 1)\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tdownValue={() => {\n\t\t\t\t\t\t\t\t\t\t\thandleChangePackageCount(packageCount - 1)\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Flex>\n\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t<Text>{orderData[index].total}</Text>\n\t\t\t\t\t\t\t<Flex flexDirection=\"column\">{orderData[index].signalPrice}</Flex>\n\t\t\t\t\t\t\t<Text>\n\t\t\t\t\t\t\t\t{orderData[index].signalPrice *\n\t\t\t\t\t\t\t\t\torderData[index].total *\n\t\t\t\t\t\t\t\t\tpackageCount}\n\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t</TableLine>\n\t\t\t\t\t))}\n\t\t\t\t</Table>\n\t\t\t</Box>\n\n\t\t\t<Button\n\t\t\t\tvariant=\"primary\"\n\t\t\t\theight=\"1.13rem\"\n\t\t\t\twidth=\"19.2rem\"\n\t\t\t\tbg=\"#000\"\n\t\t\t\tcolor=\"#fff\"\n\t\t\t\tpadding=\"0\"\n\t\t\t\tsx={{\n\t\t\t\t\tborderRadius: 0,\n\t\t\t\t\tfontSize: \"0.27rem\",\n\t\t\t\t\tcursor: \"pointer\"\n\t\t\t\t}}\n\t\t\t\tonClick={handleSubmitOrder}\n\t\t\t>\n\t\t\t\tCOMPLETE\n\t\t\t</Button>\n\t\t</Flex>\n\t)\n}\n"]},"metadata":{},"sourceType":"module"}