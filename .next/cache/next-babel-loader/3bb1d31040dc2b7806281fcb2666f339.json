{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport React, { useState, useEffect } from \"react\";\nimport request from \"../utils/request\";\nimport Router from \"next/router\";\n\nfunction useUserInfo() {\n  var _useState = useState({}),\n      info = _useState[0],\n      setInfo = _useState[1];\n\n  useEffect(function () {\n    ;\n    (function () {\n      var _getData = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var data;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return request(\"user/getCurrentUser\");\n\n              case 2:\n                data = _context.sent;\n                console.log(data, \"data\");\n\n                if (data) {\n                  setInfo(data);\n                } else {\n                  Router.push(\"/login\");\n                }\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function getData() {\n        return _getData.apply(this, arguments);\n      }\n\n      return getData;\n    })()();\n  }, []);\n  return info;\n}\n\nexport default useUserInfo;","map":{"version":3,"sources":["/Users/paige/Desktop/workspace/mm-next/hooks/getUserInfo.js"],"names":["React","useState","useEffect","request","Router","useUserInfo","info","setInfo","data","console","log","push","getData"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,OAAP,MAAoB,kBAApB;AACA,OAAOC,MAAP,MAAmB,aAAnB;;AAEA,SAASC,WAAT,GAAuB;AAAA,kBACEJ,QAAQ,CAAC,EAAD,CADV;AAAA,MACfK,IADe;AAAA,MACTC,OADS;;AAGtBL,EAAAA,SAAS,CAAC,YAAM;AACf;AAAC;AAAA;AAAA;AAAA,+BAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACkBC,OAAO,CAAC,qBAAD,CADzB;;AAAA;AACKK,gBAAAA,IADL;AAEDC,gBAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ,EAAkB,MAAlB;;AACA,oBAAIA,IAAJ,EAAU;AACTD,kBAAAA,OAAO,CAACC,IAAD,CAAP;AACA,iBAFD,MAEO;AACNJ,kBAAAA,MAAM,CAACO,IAAP,CAAY,QAAZ;AACA;;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAD;;AAAA,eAAgBC,OAAhB;AAAA;AAAA;;AAAA,aAAgBA,OAAhB;AAAA;AASD,GAVQ,EAUN,EAVM,CAAT;AAYA,SAAON,IAAP;AACA;;AAED,eAAeD,WAAf","sourcesContent":["import React, { useState, useEffect } from \"react\"\nimport request from \"../utils/request\"\nimport Router from \"next/router\"\n\nfunction useUserInfo() {\n\tconst [info, setInfo] = useState({})\n\n\tuseEffect(() => {\n\t\t;(async function getData() {\n\t\t\tconst data = await request(\"user/getCurrentUser\")\n\t\t\tconsole.log(data, \"data\")\n\t\t\tif (data) {\n\t\t\t\tsetInfo(data)\n\t\t\t} else {\n\t\t\t\tRouter.push(\"/login\")\n\t\t\t}\n\t\t})()\n\t}, [])\n\n\treturn info\n}\n\nexport default useUserInfo\n"]},"metadata":{},"sourceType":"module"}