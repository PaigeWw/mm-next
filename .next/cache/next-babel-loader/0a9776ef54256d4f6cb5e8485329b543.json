{"ast":null,"code":"import _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nvar _jsxFileName = \"/Users/paige/Desktop/workspace/mm-next/pages/made.js\";\nvar __jsx = React.createElement;\nimport React, { useState, useEffect } from \"react\";\nimport { Flex, Text, Box, Image, Button } from \"rebass\";\nimport Head from \"../components/nav\";\nimport EditBox from \"../components/made-edit-box\";\nimport BigBox from \"../components/made-big-box\";\nimport StyleItem from \"../components/made-style-item\";\nimport { getPageQuery } from \"../utils/helper\";\nimport Router from \"next/router\";\nimport request from \"../utils/request.js\"; // import SelectAssignTool from \"../components/select-assign-tool\"\n\nexport default (function () {\n  var _jsx, _jsx2;\n\n  var _useState = useState([]),\n      styleDetails = _useState[0],\n      setStyleDetails = _useState[1];\n\n  var _useState2 = useState(false),\n      showBigBox = _useState2[0],\n      setShowBigBox = _useState2[1];\n\n  var _useState3 = useState(false),\n      showEditBox = _useState3[0],\n      setShowEditBox = _useState3[1];\n\n  var _useState4 = useState(0),\n      curItemIndex = _useState4[0],\n      setCurItemIndex = _useState4[1];\n\n  var _useState5 = useState([[], [], [], [], [], []]),\n      styleInitData = _useState5[0],\n      setStyleInitData = _useState5[1];\n\n  var _useState6 = useState([]),\n      collectList = _useState6[0],\n      setCollectList = _useState6[1];\n\n  useEffect(function () {\n    var getStyleDetails =\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var query, reqList, req, i, req1, _i;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                query = getPageQuery();\n                console.log(query);\n                reqList = [];\n                _context.next = 5;\n                return request(\"style/detail\", {\n                  _id: query.id\n                }, \"get\");\n\n              case 5:\n                req = _context.sent;\n                reqList.push(req);\n\n                for (i = 0; i < 6; i++) {\n                  styleInitData[i].push({\n                    imgUrl: req.imgUrl,\n                    value: false\n                  });\n                }\n\n                if (!query.id1) {\n                  _context.next = 14;\n                  break;\n                }\n\n                _context.next = 11;\n                return request(\"style/detail\", {\n                  _id: query.id1\n                }, \"get\");\n\n              case 11:\n                req1 = _context.sent;\n                reqList.push(req1);\n\n                for (_i = 0; _i < 6; _i++) {\n                  styleInitData[_i].push({\n                    imgUrl: req1.imgUrl,\n                    value: false\n                  });\n                }\n\n              case 14:\n                setStyleInitData([].concat(styleInitData));\n                setStyleDetails(reqList);\n\n              case 16:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function getStyleDetails() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    getStyleDetails();\n  }, []);\n\n  var handleConfirmMade = function handleConfirmMade(colorIds, imgUrls) {\n    console.log(colorIds, imgUrls);\n    if (!colorIds[0]) return;\n    styleInitData[curItemIndex] = [{\n      colorId: colorIds[0],\n      imgUrl: imgUrls[0]\n    }];\n\n    if (styleDetails.length > 1) {\n      if (!colorIds[1]) return;\n      styleInitData[curItemIndex].push({\n        colorId: colorIds[1],\n        imgUrl: imgUrls[1]\n      });\n    }\n\n    setStyleInitData([].concat(styleInitData));\n  };\n\n  var handleAddFavorite =\n  /*#__PURE__*/\n  function () {\n    var _ref2 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee2(index) {\n      var params, res;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              if (styleInitData[index][0].colorId) {\n                _context2.next = 2;\n                break;\n              }\n\n              return _context2.abrupt(\"return\");\n\n            case 2:\n              console.log(styleInitData[index][0]);\n              params = [{\n                styleId: styleDetails[0]._id,\n                colorId: styleInitData[index][0].colorId\n              }];\n              collectList.push(index);\n              setCollectList([].concat(collectList));\n\n              if (!(styleDetails.length > 1)) {\n                _context2.next = 10;\n                break;\n              }\n\n              if (styleInitData[index][1].colorId) {\n                _context2.next = 9;\n                break;\n              }\n\n              return _context2.abrupt(\"return\");\n\n            case 9:\n              params.push({\n                styleId: styleDetails[1]._id,\n                colorId: styleInitData[index][1].colorId\n              });\n\n            case 10:\n              _context2.next = 12;\n              return request(\"/user/addFavorite\", {\n                styleAndColor: params\n              }, \"post\");\n\n            case 12:\n              res = _context2.sent;\n              // setStyleDetails([].concat(styleDetails))\n              console.log(res);\n\n            case 14:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function handleAddFavorite(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(React.Fragment, null, __jsx(Flex, {\n    flexDirection: \"column\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, __jsx(Head, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }), __jsx(Flex, {\n    flexDirection: \"column\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, __jsx(Flex, {\n    justifyContent: \"space-around\",\n    alignItems: \"center\",\n    fontSize: \"0.23px\",\n    bg: \"#000\",\n    color: \"#fff\",\n    width: \"19.2rem\",\n    height: \"1.12rem\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, __jsx(Text, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }, \"TOPS\"), __jsx(Text, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96\n    },\n    __self: this\n  }, \"BOTTOMS\")), __jsx(Flex, {\n    flexWrap: \"wrap\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  }, styleInitData.map(function (style, index) {\n    return __jsx(StyleItem, {\n      key: \"\".concat(index, \"-style\"),\n      styleList: style,\n      index: index,\n      collected: collectList.indexOf(index) >= 0,\n      openBigBox: function openBigBox() {\n        setShowBigBox(true);\n      },\n      onAddFavorite: function onAddFavorite() {\n        handleAddFavorite(index);\n      },\n      openEditBox: function openEditBox() {\n        setShowEditBox(true);\n        setCurItemIndex(index);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    });\n  })), __jsx(Flex, {\n    fontSize: \"0.27rem\",\n    color: \"#fff\",\n    justifyContent: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118\n    },\n    __self: this\n  }, __jsx(Button, (_jsx = {\n    height: \"1.13rem\",\n    width: \"9.6rem\",\n    bg: \"#000\",\n    variant: \"primary\",\n    padding: \"0\"\n  }, _defineProperty(_jsx, \"height\", \"1.13rem\"), _defineProperty(_jsx, \"width\", \"9.6rem\"), _defineProperty(_jsx, \"sx\", {\n    borderRadius: 0,\n    cursor: \"pointer\"\n  }), _defineProperty(_jsx, \"onClick\", function onClick() {\n    Router.back();\n  }), _defineProperty(_jsx, \"__source\", {\n    fileName: _jsxFileName,\n    lineNumber: 119\n  }), _defineProperty(_jsx, \"__self\", this), _jsx), \"< RETURN\"), __jsx(Button, (_jsx2 = {\n    height: \"1.13rem\",\n    width: \"9.6rem\",\n    bg: \"#FF8E6C\",\n    variant: \"primary\",\n    padding: \"0\"\n  }, _defineProperty(_jsx2, \"height\", \"1.13rem\"), _defineProperty(_jsx2, \"width\", \"9.6rem\"), _defineProperty(_jsx2, \"sx\", {\n    borderRadius: 0,\n    cursor: \"pointer\"\n  }), _defineProperty(_jsx2, \"onClick\", function onClick() {\n    Router.push(\"/mine\");\n  }), _defineProperty(_jsx2, \"__source\", {\n    fileName: _jsxFileName,\n    lineNumber: 137\n  }), _defineProperty(_jsx2, \"__self\", this), _jsx2), \"COMPLETE\"))), showBigBox ? __jsx(BigBox, {\n    styleDetails: styleDetails,\n    curStyle: styleInitData[curItemIndex],\n    onClose: function onClose() {\n      setShowBigBox(false);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158\n    },\n    __self: this\n  }) : null, showEditBox ? __jsx(EditBox, {\n    styleDetails: styleDetails,\n    curStyle: styleInitData[curItemIndex],\n    confirmMade: handleConfirmMade,\n    onClose: function onClose() {\n      setShowEditBox(false);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167\n    },\n    __self: this\n  }) : null));\n});","map":{"version":3,"sources":["/Users/paige/Desktop/workspace/mm-next/pages/made.js"],"names":["React","useState","useEffect","Flex","Text","Box","Image","Button","Head","EditBox","BigBox","StyleItem","getPageQuery","Router","request","styleDetails","setStyleDetails","showBigBox","setShowBigBox","showEditBox","setShowEditBox","curItemIndex","setCurItemIndex","styleInitData","setStyleInitData","collectList","setCollectList","getStyleDetails","query","console","log","reqList","_id","id","req","push","i","imgUrl","value","id1","req1","concat","handleConfirmMade","colorIds","imgUrls","colorId","length","handleAddFavorite","index","params","styleId","styleAndColor","res","map","style","indexOf","borderRadius","cursor","back"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\"\nimport { Flex, Text, Box, Image, Button } from \"rebass\"\nimport Head from \"../components/nav\"\nimport EditBox from \"../components/made-edit-box\"\nimport BigBox from \"../components/made-big-box\"\nimport StyleItem from \"../components/made-style-item\"\nimport { getPageQuery } from \"../utils/helper\"\nimport Router from \"next/router\"\nimport request from \"../utils/request.js\"\n// import SelectAssignTool from \"../components/select-assign-tool\"\nexport default () => {\n\tconst [styleDetails, setStyleDetails] = useState([])\n\tconst [showBigBox, setShowBigBox] = useState(false)\n\tconst [showEditBox, setShowEditBox] = useState(false)\n\tconst [curItemIndex, setCurItemIndex] = useState(0)\n\tconst [styleInitData, setStyleInitData] = useState([[], [], [], [], [], []])\n\tconst [collectList, setCollectList] = useState([])\n\tuseEffect(() => {\n\t\tconst getStyleDetails = async () => {\n\t\t\tlet query = getPageQuery()\n\t\t\tconsole.log(query)\n\t\t\tlet reqList = []\n\t\t\tconst req = await request(\"style/detail\", { _id: query.id }, \"get\")\n\t\t\treqList.push(req)\n\t\t\tfor (let i = 0; i < 6; i++) {\n\t\t\t\tstyleInitData[i].push({ imgUrl: req.imgUrl, value: false })\n\t\t\t}\n\t\t\tif (query.id1) {\n\t\t\t\tconst req1 = await request(\"style/detail\", { _id: query.id1 }, \"get\")\n\t\t\t\treqList.push(req1)\n\t\t\t\tfor (let i = 0; i < 6; i++) {\n\t\t\t\t\tstyleInitData[i].push({ imgUrl: req1.imgUrl, value: false })\n\t\t\t\t}\n\t\t\t}\n\t\t\tsetStyleInitData([].concat(styleInitData))\n\t\t\tsetStyleDetails(reqList)\n\t\t}\n\t\tgetStyleDetails()\n\t}, [])\n\n\tconst handleConfirmMade = (colorIds, imgUrls) => {\n\t\tconsole.log(colorIds, imgUrls)\n\t\tif (!colorIds[0]) return\n\t\tstyleInitData[curItemIndex] = [{ colorId: colorIds[0], imgUrl: imgUrls[0] }]\n\t\tif (styleDetails.length > 1) {\n\t\t\tif (!colorIds[1]) return\n\t\t\tstyleInitData[curItemIndex].push({\n\t\t\t\tcolorId: colorIds[1],\n\t\t\t\timgUrl: imgUrls[1]\n\t\t\t})\n\t\t}\n\t\tsetStyleInitData([].concat(styleInitData))\n\t}\n\n\tconst handleAddFavorite = async index => {\n\t\tif (!styleInitData[index][0].colorId) return\n\t\tconsole.log(styleInitData[index][0])\n\t\tlet params = [\n\t\t\t{\n\t\t\t\tstyleId: styleDetails[0]._id,\n\t\t\t\tcolorId: styleInitData[index][0].colorId\n\t\t\t}\n\t\t]\n\t\tcollectList.push(index)\n\t\tsetCollectList([].concat(collectList))\n\t\tif (styleDetails.length > 1) {\n\t\t\tif (!styleInitData[index][1].colorId) return\n\t\t\tparams.push({\n\t\t\t\tstyleId: styleDetails[1]._id,\n\t\t\t\tcolorId: styleInitData[index][1].colorId\n\t\t\t})\n\t\t}\n\t\tconst res = await request(\n\t\t\t\"/user/addFavorite\",\n\t\t\t{ styleAndColor: params },\n\t\t\t\"post\"\n\t\t)\n\t\t// setStyleDetails([].concat(styleDetails))\n\t\tconsole.log(res)\n\t}\n\treturn (\n\t\t<>\n\t\t\t<Flex flexDirection=\"column\">\n\t\t\t\t<Head></Head>\n\t\t\t\t<Flex flexDirection=\"column\">\n\t\t\t\t\t<Flex\n\t\t\t\t\t\tjustifyContent=\"space-around\"\n\t\t\t\t\t\talignItems=\"center\"\n\t\t\t\t\t\tfontSize=\"0.23px\"\n\t\t\t\t\t\tbg=\"#000\"\n\t\t\t\t\t\tcolor=\"#fff\"\n\t\t\t\t\t\twidth=\"19.2rem\"\n\t\t\t\t\t\theight=\"1.12rem\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Text>TOPS</Text>\n\t\t\t\t\t\t<Text>BOTTOMS</Text>\n\t\t\t\t\t</Flex>\n\t\t\t\t\t<Flex flexWrap=\"wrap\">\n\t\t\t\t\t\t{styleInitData.map((style, index) => (\n\t\t\t\t\t\t\t<StyleItem\n\t\t\t\t\t\t\t\tkey={`${index}-style`}\n\t\t\t\t\t\t\t\tstyleList={style}\n\t\t\t\t\t\t\t\tindex={index}\n\t\t\t\t\t\t\t\tcollected={collectList.indexOf(index) >= 0}\n\t\t\t\t\t\t\t\topenBigBox={() => {\n\t\t\t\t\t\t\t\t\tsetShowBigBox(true)\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tonAddFavorite={() => {\n\t\t\t\t\t\t\t\t\thandleAddFavorite(index)\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\topenEditBox={() => {\n\t\t\t\t\t\t\t\t\tsetShowEditBox(true)\n\t\t\t\t\t\t\t\t\tsetCurItemIndex(index)\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</Flex>\n\t\t\t\t\t<Flex fontSize=\"0.27rem\" color=\"#fff\" justifyContent=\"\">\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\theight=\"1.13rem\"\n\t\t\t\t\t\t\twidth=\"9.6rem\"\n\t\t\t\t\t\t\tbg=\"#000\"\n\t\t\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\t\t\tpadding=\"0\"\n\t\t\t\t\t\t\theight=\"1.13rem\"\n\t\t\t\t\t\t\twidth=\"9.6rem\"\n\t\t\t\t\t\t\tsx={{\n\t\t\t\t\t\t\t\tborderRadius: 0,\n\t\t\t\t\t\t\t\tcursor: \"pointer\"\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tRouter.back()\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{\"< RETURN\"}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\theight=\"1.13rem\"\n\t\t\t\t\t\t\twidth=\"9.6rem\"\n\t\t\t\t\t\t\tbg=\"#FF8E6C\"\n\t\t\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\t\t\tpadding=\"0\"\n\t\t\t\t\t\t\theight=\"1.13rem\"\n\t\t\t\t\t\t\twidth=\"9.6rem\"\n\t\t\t\t\t\t\tsx={{\n\t\t\t\t\t\t\t\tborderRadius: 0,\n\t\t\t\t\t\t\t\tcursor: \"pointer\"\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tRouter.push(\"/mine\")\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tCOMPLETE\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Flex>\n\t\t\t\t</Flex>\n\t\t\t\t{showBigBox ? (\n\t\t\t\t\t<BigBox\n\t\t\t\t\t\tstyleDetails={styleDetails}\n\t\t\t\t\t\tcurStyle={styleInitData[curItemIndex]}\n\t\t\t\t\t\tonClose={() => {\n\t\t\t\t\t\t\tsetShowBigBox(false)\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t) : null}\n\t\t\t\t{showEditBox ? (\n\t\t\t\t\t<EditBox\n\t\t\t\t\t\tstyleDetails={styleDetails}\n\t\t\t\t\t\tcurStyle={styleInitData[curItemIndex]}\n\t\t\t\t\t\tconfirmMade={handleConfirmMade}\n\t\t\t\t\t\tonClose={() => {\n\t\t\t\t\t\t\tsetShowEditBox(false)\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t) : null}\n\t\t\t</Flex>\n\t\t</>\n\t)\n}\n"]},"metadata":{},"sourceType":"module"}