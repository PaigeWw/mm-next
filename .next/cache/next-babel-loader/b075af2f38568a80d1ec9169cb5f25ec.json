{"ast":null,"code":"var _jsxFileName = \"/Users/paige/Desktop/workspace/mm-next/components/commons/style-img.js\";\nvar __jsx = React.createElement;\nimport React, { useEffect, useMemo } from \"react\";\nimport { ReactSVG } from \"react-svg\";\nimport { Image } from \"rebass\";\nimport { baseUrl } from \"../../utils/helper\";\nexport default (props => {\n  const {\n    width,\n    svgUrl,\n    shadowUrl,\n    key,\n    colors,\n    svgId,\n    styleId\n  } = props;\n  console.log(colors);\n  let svgElement = false;\n  useEffect(() => {// if()\n    // ;`url(${colors[0]._id})`\n  }, []);\n  useEffect(() => {\n    // if()\n    if (!svgElement || !colors) return;\n    let j = 0;\n\n    for (let i = 0; i < svgElement.children.length; i++) {\n      if (svgElement.children[i].tagName === \"g\" || svgElement.children[i].tagName === \"path\" && j < colors.length) {\n        svgElement.children[i].style.fill = colors[i].type ? `url(\"#${styleId}-${colors[j]._id}-${i}\")` : colors[j].value;\n        j++;\n      }\n    }\n  }, [colors]);\n  return __jsx(\"div\", {\n    style: {\n      position: \"relative\",\n      width: width\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33\n    },\n    __self: this\n  }, __jsx(Image, {\n    src: baseUrl + shadowUrl,\n    sx: {\n      width: width,\n      position: \"absolute\",\n      left: 0\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39\n    },\n    __self: this\n  }), __jsx(ReactSVG, {\n    style: {\n      width: width,\n      minWidth: \"14px\"\n    },\n    afterInjection: (error, svg) => {\n      if (error) {\n        console.error(error);\n        return;\n      }\n\n      if (colors && colors.length > 0 && colors[0]) {\n        let j = 0;\n\n        for (let i = 0; i < svg.children.length; i++) {\n          if (svg.children[i].tagName === \"g\" || svg.children[i].tagName === \"path\") {\n            console.log(colors);\n            svg.children[i].style.fill = colors[j].type ? `url(\"#${styleId}-${colors[j]._id}-${j}\")` : colors[j].value;\n            j++;\n          }\n        }\n      }\n    },\n    renumerateIRIElements: false,\n    loading: () => {\n      console.log(\"loading\");\n      return \"loading\";\n    },\n    beforeInjection: svg => {\n      svg.setAttribute(\"id\", svgId || key);\n      let svgDefs = document.createElementNS(\"http://www.w3.org/2000/svg\", \"defs\");\n      svg.appendChild(svgDefs);\n      svg.setAttribute(\"style\", `width: ${width}; height: 100%`);\n\n      for (let i = 0; i < colors.length; i++) {\n        let color = colors[i];\n\n        if (color.type) {\n          let svgPattern = document.createElementNS(\"http://www.w3.org/2000/svg\", \"pattern\");\n          svgPattern.setAttribute(\"id\", `${styleId}-${color._id}-${i}`); // editPatterns[color._id] = svgPattern\n\n          svgPattern.setAttribute(\"patternUnits\", \"userSpaceOnUse\");\n          svgPattern.setAttribute(\"patternContentUnits\", \"userSpaceOnUse\");\n          const imgVals = {\n            scale: 1\n          };\n          let W = color.size * svg.width.baseVal.value / 20 * imgVals.scale;\n          let H = W * color.height / color.width;\n          svgPattern.setAttribute(\"width\", `${W}px`);\n          svgPattern.setAttribute(\"height\", `${H}px`);\n          let svgPatternImage = document.createElementNS(\"http://www.w3.org/2000/svg\", \"image\");\n          svgPatternImage.setAttribute(\"width\", `${W}px`);\n          svgPatternImage.setAttribute(\"height\", `${H}px`);\n          svgPatternImage.href.baseVal = `${baseUrl}${color.value}`; // editSvgs.svgDefs.appendChild(svgPattern)\n\n          svgPattern.appendChild(svgPatternImage);\n          svgDefs.appendChild(svgPattern);\n        }\n      }\n    },\n    evalScripts: \"always\",\n    src: baseUrl + svgUrl,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }));\n});","map":{"version":3,"sources":["/Users/paige/Desktop/workspace/mm-next/components/commons/style-img.js"],"names":["React","useEffect","useMemo","ReactSVG","Image","baseUrl","props","width","svgUrl","shadowUrl","key","colors","svgId","styleId","console","log","svgElement","j","i","children","length","tagName","style","fill","type","_id","value","position","left","minWidth","error","svg","setAttribute","svgDefs","document","createElementNS","appendChild","color","svgPattern","imgVals","scale","W","size","baseVal","H","height","svgPatternImage","href"],"mappings":"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","sourcesContent":["import React, { useEffect, useMemo } from \"react\"\nimport { ReactSVG } from \"react-svg\"\nimport { Image } from \"rebass\"\nimport { baseUrl } from \"../../utils/helper\"\n\nexport default props => {\n\tconst { width, svgUrl, shadowUrl, key, colors, svgId, styleId } = props\n\tconsole.log(colors)\n\tlet svgElement = false\n\tuseEffect(() => {\n\t\t// if()\n\t\t// ;`url(${colors[0]._id})`\n\t}, [])\n\n\tuseEffect(() => {\n\t\t// if()\n\t\tif (!svgElement || !colors) return\n\t\tlet j = 0\n\t\tfor (let i = 0; i < svgElement.children.length; i++) {\n\t\t\tif (\n\t\t\t\tsvgElement.children[i].tagName === \"g\" ||\n\t\t\t\t(svgElement.children[i].tagName === \"path\" && j < colors.length)\n\t\t\t) {\n\t\t\t\tsvgElement.children[i].style.fill = colors[i].type\n\t\t\t\t\t? `url(\"#${styleId}-${colors[j]._id}-${i}\")`\n\t\t\t\t\t: colors[j].value\n\t\t\t\tj++\n\t\t\t}\n\t\t}\n\t}, [colors])\n\n\treturn (\n\t\t<div\n\t\t\tstyle={{\n\t\t\t\tposition: \"relative\",\n\t\t\t\twidth: width\n\t\t\t}}\n\t\t>\n\t\t\t<Image\n\t\t\t\tsrc={baseUrl + shadowUrl}\n\t\t\t\tsx={{\n\t\t\t\t\twidth: width,\n\t\t\t\t\tposition: \"absolute\",\n\t\t\t\t\tleft: 0\n\t\t\t\t}}\n\t\t\t/>\n\t\t\t<ReactSVG\n\t\t\t\tstyle={{\n\t\t\t\t\twidth: width,\n\t\t\t\t\tminWidth: \"14px\"\n\t\t\t\t}}\n\t\t\t\tafterInjection={(error, svg) => {\n\t\t\t\t\tif (error) {\n\t\t\t\t\t\tconsole.error(error)\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\t\t\t\t\tif (colors && colors.length > 0 && colors[0]) {\n\t\t\t\t\t\tlet j = 0\n\t\t\t\t\t\tfor (let i = 0; i < svg.children.length; i++) {\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tsvg.children[i].tagName === \"g\" ||\n\t\t\t\t\t\t\t\tsvg.children[i].tagName === \"path\"\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tconsole.log(colors)\n\t\t\t\t\t\t\t\tsvg.children[i].style.fill = colors[j].type\n\t\t\t\t\t\t\t\t\t? `url(\"#${styleId}-${colors[j]._id}-${j}\")`\n\t\t\t\t\t\t\t\t\t: colors[j].value\n\t\t\t\t\t\t\t\tj++\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t\trenumerateIRIElements={false}\n\t\t\t\tloading={() => {\n\t\t\t\t\tconsole.log(\"loading\")\n\t\t\t\t\treturn \"loading\"\n\t\t\t\t}}\n\t\t\t\tbeforeInjection={svg => {\n\t\t\t\t\tsvg.setAttribute(\"id\", svgId || key)\n\t\t\t\t\tlet svgDefs = document.createElementNS(\n\t\t\t\t\t\t\"http://www.w3.org/2000/svg\",\n\t\t\t\t\t\t\"defs\"\n\t\t\t\t\t)\n\t\t\t\t\tsvg.appendChild(svgDefs)\n\t\t\t\t\tsvg.setAttribute(\"style\", `width: ${width}; height: 100%`)\n\n\t\t\t\t\tfor (let i = 0; i < colors.length; i++) {\n\t\t\t\t\t\tlet color = colors[i]\n\t\t\t\t\t\tif (color.type) {\n\t\t\t\t\t\t\tlet svgPattern = document.createElementNS(\n\t\t\t\t\t\t\t\t\"http://www.w3.org/2000/svg\",\n\t\t\t\t\t\t\t\t\"pattern\"\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\tsvgPattern.setAttribute(\"id\", `${styleId}-${color._id}-${i}`)\n\t\t\t\t\t\t\t// editPatterns[color._id] = svgPattern\n\t\t\t\t\t\t\tsvgPattern.setAttribute(\"patternUnits\", \"userSpaceOnUse\")\n\t\t\t\t\t\t\tsvgPattern.setAttribute(\"patternContentUnits\", \"userSpaceOnUse\")\n\t\t\t\t\t\t\tconst imgVals = { scale: 1 }\n\n\t\t\t\t\t\t\tlet W =\n\t\t\t\t\t\t\t\t((color.size * svg.width.baseVal.value) / 20) * imgVals.scale\n\t\t\t\t\t\t\tlet H = (W * color.height) / color.width\n\n\t\t\t\t\t\t\tsvgPattern.setAttribute(\"width\", `${W}px`)\n\t\t\t\t\t\t\tsvgPattern.setAttribute(\"height\", `${H}px`)\n\n\t\t\t\t\t\t\tlet svgPatternImage = document.createElementNS(\n\t\t\t\t\t\t\t\t\"http://www.w3.org/2000/svg\",\n\t\t\t\t\t\t\t\t\"image\"\n\t\t\t\t\t\t\t)\n\n\t\t\t\t\t\t\tsvgPatternImage.setAttribute(\"width\", `${W}px`)\n\t\t\t\t\t\t\tsvgPatternImage.setAttribute(\"height\", `${H}px`)\n\t\t\t\t\t\t\tsvgPatternImage.href.baseVal = `${baseUrl}${color.value}`\n\n\t\t\t\t\t\t\t// editSvgs.svgDefs.appendChild(svgPattern)\n\t\t\t\t\t\t\tsvgPattern.appendChild(svgPatternImage)\n\t\t\t\t\t\t\tsvgDefs.appendChild(svgPattern)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t\tevalScripts=\"always\"\n\t\t\t\tsrc={baseUrl + svgUrl}\n\t\t\t/>\n\t\t</div>\n\t)\n}\n"]},"metadata":{},"sourceType":"module"}