{"ast":null,"code":"import _Object$defineProperty from \"@babel/runtime-corejs2/core-js/object/define-property\";\nimport _Object$defineProperties from \"@babel/runtime-corejs2/core-js/object/define-properties\";\nimport _Object$getOwnPropertyDescriptors from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors\";\nimport _Object$getOwnPropertyDescriptor from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor\";\nimport _Object$getOwnPropertySymbols from \"@babel/runtime-corejs2/core-js/object/get-own-property-symbols\";\nimport _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/paige/Desktop/workspace/mm-next/components/tables/collect-table.js\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = _Object$keys(object); if (_Object$getOwnPropertySymbols) { var symbols = _Object$getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return _Object$getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (_Object$getOwnPropertyDescriptors) { _Object$defineProperties(target, _Object$getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { _Object$defineProperty(target, key, _Object$getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect } from \"react\";\nimport { Flex, Text, Box, Button, Row, Column } from \"rebass\";\nimport Table, { TableLine, ProductInfo } from \"./base-table\";\nimport EditBox from \"../made-edit-box\";\nimport ShowStyle from \"../show-style\";\nimport request from \"../../utils/request\";\nexport default (props => {\n  const {\n    0: showEditBox,\n    1: setShowEditBox\n  } = useState(false);\n  const {\n    0: editIndex,\n    1: setEditIndex\n  } = useState(0);\n  const mode = \"POSITIVE\";\n  const {\n    0: collectList,\n    1: setCollectList\n  } = useState([]);\n  const {\n    0: collectDetailsList,\n    1: setCollectDetailsList\n  } = useState([]);\n  const {\n    0: selectList,\n    1: setSelectList\n  } = useState([]);\n  useEffect(() => {\n    const getCollectList = async () => {\n      const res = await request(\"/user/getFavoriteList\"); // console.log(\"----res----\", res)\n\n      if (!res) return;\n      const data = res.map(item => {\n        let prodInfo = [];\n        let price = [];\n        let style = [];\n        let colorInfo = [];\n        let date = [];\n        let details = [];\n        let threeViews = item.styleAndColor.map(x => {\n          details.push(x.style);\n          prodInfo.push({\n            styleNo: x.style.styleNo\n          });\n          price.push(x.style.price);\n          date.push(x.style.updateTime);\n          colorInfo.push({\n            colorId: x.color._id,\n            imgUrl: x.color.value\n          });\n          return {\n            POSITIVE: x.color.value\n          }; // style.push(item.styleNo)\n        });\n        collectDetailsList.push(details);\n        setCollectDetailsList([].concat(collectDetailsList));\n        return {\n          id: item._id,\n          colorInfo,\n          threeViews,\n          prodInfo,\n          price,\n          style,\n          date\n        };\n      });\n      setCollectList(data);\n    };\n\n    getCollectList();\n  }, []);\n\n  const handleSelect = (index, item) => {\n    const pos = selectList.findIndex(x => x.index === index);\n\n    if (pos < 0) {\n      selectList.push(_objectSpread({\n        index\n      }, item, {\n        details: collectDetailsList[index]\n      }));\n    } else {\n      selectList.splice(pos, 1);\n    }\n\n    setSelectList([].concat(selectList));\n  };\n\n  const handleDel = async (index, item) => {\n    console.log(item);\n    const res = await request(\"/user/deleteFavorite\", {\n      _id: item.id\n    }, \"post\"); // console.log(\"res\", res)\n\n    if (res) {\n      console.log(\"删除他，嘿嘿嘿\");\n      collectList.splice(index, 1);\n      setCollectList([].concat(collectList));\n    }\n  };\n\n  const handleConfirmMade = async (index, item) => {\n    // const res = await request(\"/user/updateFavorite\", {  }, \"post\")\n    if (!styleInitData[index][0].colorId) return;\n    let params = [{\n      styleId: styleDetails[0]._id,\n      colorId: styleInitData[index][0].colorId\n    }];\n    collectList.push(index);\n    setCollectList([].concat(collectList));\n\n    if (styleDetails.length > 1) {\n      if (!styleInitData[index][1].colorId) return;\n      params.push({\n        styleId: styleDetails[1]._id,\n        colorId: styleInitData[index][1].colorId\n      });\n    }\n\n    const res = await request(\"/user/updateFavorite\", {\n      _id: item.id,\n      styleAndColor: params\n    }, \"post\"); // setStyleDetails([].concat(styleDetails))\n\n    console.log(res);\n  };\n\n  return collectList.length > 0 ? __jsx(Flex, {\n    flexDirection: \"column\",\n    justifyContent: \"space-between\",\n    sx: {\n      cursor: \"pointer\",\n      height: \"100%\",\n      background: \"#FFF0E5\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102\n    },\n    __self: this\n  }, __jsx(Table, {\n    titles: [{\n      name: \"00\",\n      width: \"2/22\",\n      isHide: true\n    }, {\n      name: \"PICTRUE\",\n      width: \"2/22\"\n    }, {\n      name: \"PRODUCT INFOMATION\",\n      width: \"4/22\"\n    }, {\n      name: \"PRICE\",\n      width: \"1/22\"\n    }, {\n      name: \"DATE\",\n      width: \"2/22\"\n    }, {\n      name: \"STYLE\",\n      width: \"1/22\"\n    }, {\n      name: \"EDIT\",\n      width: \"5/22\"\n    }],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  }, collectList.map((collect, index) => __jsx(TableLine, {\n    isSelect: selectList.findIndex(x => index === x.index) >= 0,\n    haveSelect: true,\n    onSelect: () => {\n      handleSelect(index, collect);\n    },\n    haveDel: true,\n    onDel: () => {\n      handleDel(index, collect);\n    },\n    haveEdit: true,\n    onEdit: () => {\n      setEditIndex(index);\n      setShowEditBox(true);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123\n    },\n    __self: this\n  }, __jsx(Text, {\n    style: {\n      position: \"absolute\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139\n    },\n    __self: this\n  }, index + 1), __jsx(ShowStyle // width=\"2rem\"\n  , {\n    key: collect.id,\n    imgWidth: \"0.95rem\",\n    mode: mode,\n    threeViews: collect.threeViews,\n    border: \"none\",\n    hideInfo: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140\n    },\n    __self: this\n  }), __jsx(Flex, {\n    justifyContent: \"center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149\n    },\n    __self: this\n  }, __jsx(Box, {\n    margin: \"8px 0\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150\n    },\n    __self: this\n  }, collect.prodInfo.map(prodInfo => __jsx(ProductInfo, {\n    styleNum: prodInfo.styleNo,\n    made: \"2110 YE GREEN/2001 YE GREEN\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152\n    },\n    __self: this\n  })))), __jsx(Flex, {\n    flexDirection: \"column\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161\n    },\n    __self: this\n  }, collect.price.map(price => __jsx(Text, {\n    p: \"4px 0\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163\n    },\n    __self: this\n  }, price))), __jsx(Flex, {\n    flexDirection: \"column\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166\n    },\n    __self: this\n  }, collect.date.map(date => __jsx(Text, {\n    p: \"4px 0\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168\n    },\n    __self: this\n  }, date))), __jsx(Flex, {\n    flexDirection: \"column\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171\n    },\n    __self: this\n  }, __jsx(Text, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172\n    },\n    __self: this\n  }, \"TOPS\"), __jsx(Text, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173\n    },\n    __self: this\n  }, \"BOTTOMS\"))))), __jsx(Button, {\n    variant: \"primary\",\n    height: \"1.13rem\",\n    width: \"19.2rem\",\n    bg: \"#000\",\n    color: \"#fff\",\n    padding: \"0\",\n    sx: {\n      borderRadius: 0,\n      fontSize: \"0.27rem\",\n      cursor: \"pointer\"\n    },\n    onClick: () => {\n      props.nextStep(selectList);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178\n    },\n    __self: this\n  }, \"GENERATE ORDERSs\"), showEditBox ? __jsx(EditBox, {\n    styleDetails: collectDetailsList[editIndex],\n    curStyle: collectList[editIndex].colorInfo,\n    confirmMade: handleConfirmMade,\n    onClose: () => {\n      setShowEditBox(false);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197\n    },\n    __self: this\n  }) : null) : null;\n});","map":{"version":3,"sources":["/Users/paige/Desktop/workspace/mm-next/components/tables/collect-table.js"],"names":["React","useState","useEffect","Flex","Text","Box","Button","Row","Column","Table","TableLine","ProductInfo","EditBox","ShowStyle","request","props","showEditBox","setShowEditBox","editIndex","setEditIndex","mode","collectList","setCollectList","collectDetailsList","setCollectDetailsList","selectList","setSelectList","getCollectList","res","data","map","item","prodInfo","price","style","colorInfo","date","details","threeViews","styleAndColor","x","push","styleNo","updateTime","colorId","color","_id","imgUrl","value","POSITIVE","concat","id","handleSelect","index","pos","findIndex","splice","handleDel","console","log","handleConfirmMade","styleInitData","params","styleId","styleDetails","length","cursor","height","background","name","width","isHide","collect","position","borderRadius","fontSize","nextStep"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\"\nimport { Flex, Text, Box, Button, Row, Column } from \"rebass\"\nimport Table, { TableLine, ProductInfo } from \"./base-table\"\n\nimport EditBox from \"../made-edit-box\"\nimport ShowStyle from \"../show-style\"\nimport request from \"../../utils/request\"\nexport default props => {\n\tconst [showEditBox, setShowEditBox] = useState(false)\n\tconst [editIndex, setEditIndex] = useState(0)\n\tconst mode = \"POSITIVE\"\n\tconst [collectList, setCollectList] = useState([])\n\tconst [collectDetailsList, setCollectDetailsList] = useState([])\n\tconst [selectList, setSelectList] = useState([])\n\tuseEffect(() => {\n\t\tconst getCollectList = async () => {\n\t\t\tconst res = await request(\"/user/getFavoriteList\")\n\t\t\t// console.log(\"----res----\", res)\n\t\t\tif (!res) return\n\t\t\tconst data = res.map(item => {\n\t\t\t\tlet prodInfo = []\n\t\t\t\tlet price = []\n\t\t\t\tlet style = []\n\t\t\t\tlet colorInfo = []\n\t\t\t\tlet date = []\n\t\t\t\tlet details = []\n\t\t\t\tlet threeViews = item.styleAndColor.map(x => {\n\t\t\t\t\tdetails.push(x.style)\n\t\t\t\t\tprodInfo.push({\n\t\t\t\t\t\tstyleNo: x.style.styleNo\n\t\t\t\t\t})\n\t\t\t\t\tprice.push(x.style.price)\n\t\t\t\t\tdate.push(x.style.updateTime)\n\t\t\t\t\tcolorInfo.push({ colorId: x.color._id, imgUrl: x.color.value })\n\t\t\t\t\treturn { POSITIVE: x.color.value }\n\t\t\t\t\t// style.push(item.styleNo)\n\t\t\t\t})\n\t\t\t\tcollectDetailsList.push(details)\n\t\t\t\tsetCollectDetailsList([].concat(collectDetailsList))\n\t\t\t\treturn {\n\t\t\t\t\tid: item._id,\n\t\t\t\t\tcolorInfo,\n\t\t\t\t\tthreeViews,\n\t\t\t\t\tprodInfo,\n\t\t\t\t\tprice,\n\t\t\t\t\tstyle,\n\t\t\t\t\tdate\n\t\t\t\t}\n\t\t\t})\n\n\t\t\tsetCollectList(data)\n\t\t}\n\n\t\tgetCollectList()\n\t}, [])\n\tconst handleSelect = (index, item) => {\n\t\tconst pos = selectList.findIndex(x => x.index === index)\n\t\tif (pos < 0) {\n\t\t\tselectList.push({ index, ...item, details: collectDetailsList[index] })\n\t\t} else {\n\t\t\tselectList.splice(pos, 1)\n\t\t}\n\t\tsetSelectList([].concat(selectList))\n\t}\n\tconst handleDel = async (index, item) => {\n\t\tconsole.log(item)\n\t\tconst res = await request(\"/user/deleteFavorite\", { _id: item.id }, \"post\")\n\t\t// console.log(\"res\", res)\n\t\tif (res) {\n\t\t\tconsole.log(\"删除他，嘿嘿嘿\")\n\t\t\tcollectList.splice(index, 1)\n\t\t\tsetCollectList([].concat(collectList))\n\t\t}\n\t}\n\tconst handleConfirmMade = async (index, item) => {\n\t\t// const res = await request(\"/user/updateFavorite\", {  }, \"post\")\n\t\tif (!styleInitData[index][0].colorId) return\n\t\tlet params = [\n\t\t\t{\n\t\t\t\tstyleId: styleDetails[0]._id,\n\t\t\t\tcolorId: styleInitData[index][0].colorId\n\t\t\t}\n\t\t]\n\t\tcollectList.push(index)\n\t\tsetCollectList([].concat(collectList))\n\t\tif (styleDetails.length > 1) {\n\t\t\tif (!styleInitData[index][1].colorId) return\n\t\t\tparams.push({\n\t\t\t\tstyleId: styleDetails[1]._id,\n\t\t\t\tcolorId: styleInitData[index][1].colorId\n\t\t\t})\n\t\t}\n\t\tconst res = await request(\n\t\t\t\"/user/updateFavorite\",\n\t\t\t{ _id: item.id, styleAndColor: params },\n\t\t\t\"post\"\n\t\t)\n\t\t// setStyleDetails([].concat(styleDetails))\n\t\tconsole.log(res)\n\t}\n\treturn collectList.length > 0 ? (\n\t\t<Flex\n\t\t\tflexDirection=\"column\"\n\t\t\tjustifyContent=\"space-between\"\n\t\t\tsx={{\n\t\t\t\tcursor: \"pointer\",\n\t\t\t\theight: \"100%\",\n\t\t\t\tbackground: \"#FFF0E5\"\n\t\t\t}}\n\t\t>\n\t\t\t<Table\n\t\t\t\ttitles={[\n\t\t\t\t\t{ name: \"00\", width: \"2/22\", isHide: true },\n\t\t\t\t\t{ name: \"PICTRUE\", width: \"2/22\" },\n\t\t\t\t\t{ name: \"PRODUCT INFOMATION\", width: \"4/22\" },\n\t\t\t\t\t{ name: \"PRICE\", width: \"1/22\" },\n\t\t\t\t\t{ name: \"DATE\", width: \"2/22\" },\n\t\t\t\t\t{ name: \"STYLE\", width: \"1/22\" },\n\t\t\t\t\t{ name: \"EDIT\", width: \"5/22\" }\n\t\t\t\t]}\n\t\t\t>\n\t\t\t\t{collectList.map((collect, index) => (\n\t\t\t\t\t<TableLine\n\t\t\t\t\t\tisSelect={selectList.findIndex(x => index === x.index) >= 0}\n\t\t\t\t\t\thaveSelect\n\t\t\t\t\t\tonSelect={() => {\n\t\t\t\t\t\t\thandleSelect(index, collect)\n\t\t\t\t\t\t}}\n\t\t\t\t\t\thaveDel\n\t\t\t\t\t\tonDel={() => {\n\t\t\t\t\t\t\thandleDel(index, collect)\n\t\t\t\t\t\t}}\n\t\t\t\t\t\thaveEdit\n\t\t\t\t\t\tonEdit={() => {\n\t\t\t\t\t\t\tsetEditIndex(index)\n\t\t\t\t\t\t\tsetShowEditBox(true)\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Text style={{ position: \"absolute\" }}>{index + 1}</Text>\n\t\t\t\t\t\t<ShowStyle\n\t\t\t\t\t\t\t// width=\"2rem\"\n\t\t\t\t\t\t\tkey={collect.id}\n\t\t\t\t\t\t\timgWidth=\"0.95rem\"\n\t\t\t\t\t\t\tmode={mode}\n\t\t\t\t\t\t\tthreeViews={collect.threeViews}\n\t\t\t\t\t\t\tborder=\"none\"\n\t\t\t\t\t\t\thideInfo\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Flex justifyContent=\"center\">\n\t\t\t\t\t\t\t<Box margin=\"8px 0\">\n\t\t\t\t\t\t\t\t{collect.prodInfo.map(prodInfo => (\n\t\t\t\t\t\t\t\t\t<ProductInfo\n\t\t\t\t\t\t\t\t\t\tstyleNum={prodInfo.styleNo}\n\t\t\t\t\t\t\t\t\t\tmade=\"2110 YE GREEN/2001 YE GREEN\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t))}\n\n\t\t\t\t\t\t\t\t{/* <ProductInfo styleNum=\"VERSION K2009\" made=\"2110 YE GREEN\" /> */}\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t</Flex>\n\t\t\t\t\t\t<Flex flexDirection=\"column\">\n\t\t\t\t\t\t\t{collect.price.map(price => (\n\t\t\t\t\t\t\t\t<Text p=\"4px 0\">{price}</Text>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</Flex>\n\t\t\t\t\t\t<Flex flexDirection=\"column\">\n\t\t\t\t\t\t\t{collect.date.map(date => (\n\t\t\t\t\t\t\t\t<Text p=\"4px 0\">{date}</Text>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</Flex>\n\t\t\t\t\t\t<Flex flexDirection=\"column\">\n\t\t\t\t\t\t\t<Text>TOPS</Text>\n\t\t\t\t\t\t\t<Text>BOTTOMS</Text>\n\t\t\t\t\t\t</Flex>\n\t\t\t\t\t</TableLine>\n\t\t\t\t))}\n\t\t\t</Table>\n\t\t\t<Button\n\t\t\t\tvariant=\"primary\"\n\t\t\t\theight=\"1.13rem\"\n\t\t\t\twidth=\"19.2rem\"\n\t\t\t\tbg=\"#000\"\n\t\t\t\tcolor=\"#fff\"\n\t\t\t\tpadding=\"0\"\n\t\t\t\tsx={{\n\t\t\t\t\tborderRadius: 0,\n\t\t\t\t\tfontSize: \"0.27rem\",\n\t\t\t\t\tcursor: \"pointer\"\n\t\t\t\t}}\n\t\t\t\tonClick={() => {\n\t\t\t\t\tprops.nextStep(selectList)\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\tGENERATE ORDERSs\n\t\t\t</Button>\n\t\t\t{showEditBox ? (\n\t\t\t\t<EditBox\n\t\t\t\t\tstyleDetails={collectDetailsList[editIndex]}\n\t\t\t\t\tcurStyle={collectList[editIndex].colorInfo}\n\t\t\t\t\tconfirmMade={handleConfirmMade}\n\t\t\t\t\tonClose={() => {\n\t\t\t\t\t\tsetShowEditBox(false)\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t) : null}\n\t\t</Flex>\n\t) : null\n}\n"]},"metadata":{},"sourceType":"module"}