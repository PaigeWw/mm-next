{"ast":null,"code":"var _jsxFileName = \"/Users/paige/Desktop/workspace/mm-next/pages/made.js\";\nvar __jsx = React.createElement;\nimport React, { useState, useEffect } from \"react\";\nimport { Flex, Text, Box, Image, Button } from \"rebass\";\nimport Head from \"../components/nav\";\nimport EditBox from \"../components/made-edit-box\";\nimport BigBox from \"../components/made-big-box\";\nimport StyleItem from \"../components/made-style-item\";\nimport { getPageQuery } from \"../utils/helper\";\nimport Router from \"next/router\";\nimport request from \"../utils/request.js\";\nimport useUserInfo from \"../hooks/getUserInfo\";\nimport ReactSvg from \"../components/commons/react-svg\";\nimport { baseUrl } from \"../utils/helper\"; // import SelectAssignTool from \"../components/select-assign-tool\"\n\nexport default (() => {\n  const userInfo = useUserInfo();\n  console.log(userInfo, \"userInfo\");\n  const {\n    0: styleDetails,\n    1: setStyleDetails\n  } = useState([]);\n  const {\n    0: showBigBox,\n    1: setShowBigBox\n  } = useState(false);\n  const {\n    0: showEditBox,\n    1: setShowEditBox\n  } = useState(false);\n  const {\n    0: curItemIndex,\n    1: setCurItemIndex\n  } = useState(0);\n  const {\n    0: styleInitData,\n    1: setStyleInitData\n  } = useState([[], [], [], [], [], []]);\n  const {\n    0: collectList,\n    1: setCollectList\n  } = useState([]);\n  useEffect(() => {\n    const getStyleDetails = async () => {\n      let query = getPageQuery();\n      console.log(query);\n      let reqList = [];\n      const req = await request(\"style/detail\", {\n        _id: query.id\n      }, \"get\");\n      reqList.push(req);\n\n      for (let i = 0; i < 6; i++) {\n        styleInitData[i].push({\n          imgUrl: req.imgUrl,\n          value: false\n        });\n      }\n\n      if (query.id1) {\n        const req1 = await request(\"style/detail\", {\n          _id: query.id1\n        }, \"get\");\n        reqList.push(req1);\n\n        for (let i = 0; i < 6; i++) {\n          styleInitData[i].push({\n            imgUrl: req1.imgUrl,\n            value: false\n          });\n        }\n      }\n\n      setStyleInitData([].concat(styleInitData));\n      setStyleDetails(reqList);\n    };\n\n    getStyleDetails();\n  }, []);\n\n  const handleConfirmMade = (colorIds, imgUrls) => {\n    console.log(colorIds, imgUrls);\n    if (!colorIds[0]) return;\n    styleInitData[curItemIndex] = [{\n      colorId: colorIds[0],\n      imgUrl: imgUrls[0]\n    }];\n\n    if (styleDetails.length > 1) {\n      if (!colorIds[1]) return;\n      styleInitData[curItemIndex].push({\n        colorId: colorIds[1],\n        imgUrl: imgUrls[1]\n      });\n    }\n\n    setStyleInitData([].concat(styleInitData));\n  };\n\n  const handleAddFavorite = async index => {\n    if (!styleInitData[index][0].colorId) return;\n    console.log(styleInitData[index][0]);\n    let params = [{\n      styleId: styleDetails[0]._id,\n      colorId: styleInitData[index][0].colorId,\n      front: styleInitData[index][0].imgUrl\n    }];\n    collectList.push(index);\n    setCollectList([].concat(collectList));\n\n    if (styleDetails.length > 1) {\n      if (!styleInitData[index][1].colorId) return;\n      params.push({\n        styleId: styleDetails[1]._id,\n        colorId: styleInitData[index][1].colorId,\n        front: styleInitData[index][1].imgUrl\n      });\n    }\n\n    const res = await request(\"/user/addFavorite\", {\n      styleAndColor: params\n    }, \"post\"); // setStyleDetails([].concat(styleDetails))\n\n    console.log(res);\n  };\n\n  return __jsx(React.Fragment, null, __jsx(Flex, {\n    flexDirection: \"column\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, __jsx(Head, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }), __jsx(ReactSvg, {\n    beforeInjection: svg => {\n      svg.setAttribute(\"id\", \"mm-defs-svg\");\n      svg.setAttribute(\"style\", \"width: 0%; height: 0%\");\n    },\n    src: `${baseUrl}uploads/2020-03-07/1583561658305.svg`,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }), __jsx(Flex, {\n    flexDirection: \"column\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  }, __jsx(Flex, {\n    justifyContent: \"space-around\",\n    alignItems: \"center\",\n    fontSize: \"0.23px\",\n    bg: \"#000\",\n    color: \"#fff\",\n    width: \"19.2rem\",\n    height: \"1.12rem\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100\n    },\n    __self: this\n  }, __jsx(Text, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109\n    },\n    __self: this\n  }, \"TOPS\"), __jsx(Text, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110\n    },\n    __self: this\n  }, \"BOTTOMS\")), __jsx(Flex, {\n    flexWrap: \"wrap\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112\n    },\n    __self: this\n  }, styleInitData.map((style, index) => __jsx(StyleItem, {\n    key: `${index}-style`,\n    styleList: style,\n    index: index,\n    collected: collectList.indexOf(index) >= 0,\n    openBigBox: () => {\n      setShowBigBox(true);\n    },\n    onAddFavorite: () => {\n      handleAddFavorite(index);\n    },\n    openEditBox: () => {\n      setShowEditBox(true);\n      setCurItemIndex(index);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114\n    },\n    __self: this\n  }))), __jsx(Flex, {\n    fontSize: \"0.27rem\",\n    color: \"#fff\",\n    justifyContent: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132\n    },\n    __self: this\n  }, __jsx(Button, {\n    height: \"1.13rem\",\n    width: \"9.6rem\",\n    bg: \"#000\",\n    variant: \"primary\",\n    padding: \"0\",\n    height: \"1.13rem\",\n    width: \"9.6rem\",\n    sx: {\n      borderRadius: 0,\n      cursor: \"pointer\"\n    },\n    onClick: () => {\n      Router.back();\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133\n    },\n    __self: this\n  }, \"< RETURN\"), __jsx(Button, {\n    height: \"1.13rem\",\n    width: \"9.6rem\",\n    bg: \"#FF8E6C\",\n    variant: \"primary\",\n    padding: \"0\",\n    height: \"1.13rem\",\n    width: \"9.6rem\",\n    sx: {\n      borderRadius: 0,\n      cursor: \"pointer\"\n    },\n    onClick: () => {\n      Router.push(\"/mine\");\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151\n    },\n    __self: this\n  }, \"COMPLETE\"))), showBigBox ? __jsx(BigBox, {\n    styleDetails: styleDetails,\n    curStyle: styleInitData[curItemIndex],\n    onClose: () => {\n      setShowBigBox(false);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172\n    },\n    __self: this\n  }) : null, showEditBox ? __jsx(EditBox, {\n    userInfo: userInfo,\n    styleDetails: styleDetails,\n    curStyle: styleInitData[curItemIndex],\n    confirmMade: handleConfirmMade,\n    onClose: () => {\n      setShowEditBox(false);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181\n    },\n    __self: this\n  }) : null));\n});","map":{"version":3,"sources":["/Users/paige/Desktop/workspace/mm-next/pages/made.js"],"names":["React","useState","useEffect","Flex","Text","Box","Image","Button","Head","EditBox","BigBox","StyleItem","getPageQuery","Router","request","useUserInfo","ReactSvg","baseUrl","userInfo","console","log","styleDetails","setStyleDetails","showBigBox","setShowBigBox","showEditBox","setShowEditBox","curItemIndex","setCurItemIndex","styleInitData","setStyleInitData","collectList","setCollectList","getStyleDetails","query","reqList","req","_id","id","push","i","imgUrl","value","id1","req1","concat","handleConfirmMade","colorIds","imgUrls","colorId","length","handleAddFavorite","index","params","styleId","front","res","styleAndColor","svg","setAttribute","map","style","indexOf","borderRadius","cursor","back"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,IAAT,EAAeC,IAAf,EAAqBC,GAArB,EAA0BC,KAA1B,EAAiCC,MAAjC,QAA+C,QAA/C;AACA,OAAOC,IAAP,MAAiB,mBAAjB;AACA,OAAOC,OAAP,MAAoB,6BAApB;AACA,OAAOC,MAAP,MAAmB,4BAAnB;AACA,OAAOC,SAAP,MAAsB,+BAAtB;AACA,SAASC,YAAT,QAA6B,iBAA7B;AACA,OAAOC,MAAP,MAAmB,aAAnB;AACA,OAAOC,OAAP,MAAoB,qBAApB;AACA,OAAOC,WAAP,MAAwB,sBAAxB;AACA,OAAOC,QAAP,MAAqB,iCAArB;AACA,SAASC,OAAT,QAAwB,iBAAxB,C,CACA;;AACA,gBAAe,MAAM;AACpB,QAAMC,QAAQ,GAAGH,WAAW,EAA5B;AACAI,EAAAA,OAAO,CAACC,GAAR,CAAYF,QAAZ,EAAsB,UAAtB;AACA,QAAM;AAAA,OAACG,YAAD;AAAA,OAAeC;AAAf,MAAkCrB,QAAQ,CAAC,EAAD,CAAhD;AACA,QAAM;AAAA,OAACsB,UAAD;AAAA,OAAaC;AAAb,MAA8BvB,QAAQ,CAAC,KAAD,CAA5C;AACA,QAAM;AAAA,OAACwB,WAAD;AAAA,OAAcC;AAAd,MAAgCzB,QAAQ,CAAC,KAAD,CAA9C;AACA,QAAM;AAAA,OAAC0B,YAAD;AAAA,OAAeC;AAAf,MAAkC3B,QAAQ,CAAC,CAAD,CAAhD;AACA,QAAM;AAAA,OAAC4B,aAAD;AAAA,OAAgBC;AAAhB,MAAoC7B,QAAQ,CAAC,CAAC,EAAD,EAAK,EAAL,EAAS,EAAT,EAAa,EAAb,EAAiB,EAAjB,EAAqB,EAArB,CAAD,CAAlD;AACA,QAAM;AAAA,OAAC8B,WAAD;AAAA,OAAcC;AAAd,MAAgC/B,QAAQ,CAAC,EAAD,CAA9C;AACAC,EAAAA,SAAS,CAAC,MAAM;AACf,UAAM+B,eAAe,GAAG,YAAY;AACnC,UAAIC,KAAK,GAAGtB,YAAY,EAAxB;AACAO,MAAAA,OAAO,CAACC,GAAR,CAAYc,KAAZ;AACA,UAAIC,OAAO,GAAG,EAAd;AACA,YAAMC,GAAG,GAAG,MAAMtB,OAAO,CAAC,cAAD,EAAiB;AAAEuB,QAAAA,GAAG,EAAEH,KAAK,CAACI;AAAb,OAAjB,EAAoC,KAApC,CAAzB;AACAH,MAAAA,OAAO,CAACI,IAAR,CAAaH,GAAb;;AACA,WAAK,IAAII,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuBA,CAAC,EAAxB,EAA4B;AAC3BX,QAAAA,aAAa,CAACW,CAAD,CAAb,CAAiBD,IAAjB,CAAsB;AAAEE,UAAAA,MAAM,EAAEL,GAAG,CAACK,MAAd;AAAsBC,UAAAA,KAAK,EAAE;AAA7B,SAAtB;AACA;;AACD,UAAIR,KAAK,CAACS,GAAV,EAAe;AACd,cAAMC,IAAI,GAAG,MAAM9B,OAAO,CAAC,cAAD,EAAiB;AAAEuB,UAAAA,GAAG,EAAEH,KAAK,CAACS;AAAb,SAAjB,EAAqC,KAArC,CAA1B;AACAR,QAAAA,OAAO,CAACI,IAAR,CAAaK,IAAb;;AACA,aAAK,IAAIJ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuBA,CAAC,EAAxB,EAA4B;AAC3BX,UAAAA,aAAa,CAACW,CAAD,CAAb,CAAiBD,IAAjB,CAAsB;AAAEE,YAAAA,MAAM,EAAEG,IAAI,CAACH,MAAf;AAAuBC,YAAAA,KAAK,EAAE;AAA9B,WAAtB;AACA;AACD;;AACDZ,MAAAA,gBAAgB,CAAC,GAAGe,MAAH,CAAUhB,aAAV,CAAD,CAAhB;AACAP,MAAAA,eAAe,CAACa,OAAD,CAAf;AACA,KAlBD;;AAmBAF,IAAAA,eAAe;AACf,GArBQ,EAqBN,EArBM,CAAT;;AAuBA,QAAMa,iBAAiB,GAAG,CAACC,QAAD,EAAWC,OAAX,KAAuB;AAChD7B,IAAAA,OAAO,CAACC,GAAR,CAAY2B,QAAZ,EAAsBC,OAAtB;AACA,QAAI,CAACD,QAAQ,CAAC,CAAD,CAAb,EAAkB;AAClBlB,IAAAA,aAAa,CAACF,YAAD,CAAb,GAA8B,CAAC;AAAEsB,MAAAA,OAAO,EAAEF,QAAQ,CAAC,CAAD,CAAnB;AAAwBN,MAAAA,MAAM,EAAEO,OAAO,CAAC,CAAD;AAAvC,KAAD,CAA9B;;AACA,QAAI3B,YAAY,CAAC6B,MAAb,GAAsB,CAA1B,EAA6B;AAC5B,UAAI,CAACH,QAAQ,CAAC,CAAD,CAAb,EAAkB;AAClBlB,MAAAA,aAAa,CAACF,YAAD,CAAb,CAA4BY,IAA5B,CAAiC;AAChCU,QAAAA,OAAO,EAAEF,QAAQ,CAAC,CAAD,CADe;AAEhCN,QAAAA,MAAM,EAAEO,OAAO,CAAC,CAAD;AAFiB,OAAjC;AAIA;;AACDlB,IAAAA,gBAAgB,CAAC,GAAGe,MAAH,CAAUhB,aAAV,CAAD,CAAhB;AACA,GAZD;;AAcA,QAAMsB,iBAAiB,GAAG,MAAMC,KAAN,IAAe;AACxC,QAAI,CAACvB,aAAa,CAACuB,KAAD,CAAb,CAAqB,CAArB,EAAwBH,OAA7B,EAAsC;AACtC9B,IAAAA,OAAO,CAACC,GAAR,CAAYS,aAAa,CAACuB,KAAD,CAAb,CAAqB,CAArB,CAAZ;AACA,QAAIC,MAAM,GAAG,CACZ;AACCC,MAAAA,OAAO,EAAEjC,YAAY,CAAC,CAAD,CAAZ,CAAgBgB,GAD1B;AAECY,MAAAA,OAAO,EAAEpB,aAAa,CAACuB,KAAD,CAAb,CAAqB,CAArB,EAAwBH,OAFlC;AAGCM,MAAAA,KAAK,EAAE1B,aAAa,CAACuB,KAAD,CAAb,CAAqB,CAArB,EAAwBX;AAHhC,KADY,CAAb;AAOAV,IAAAA,WAAW,CAACQ,IAAZ,CAAiBa,KAAjB;AACApB,IAAAA,cAAc,CAAC,GAAGa,MAAH,CAAUd,WAAV,CAAD,CAAd;;AACA,QAAIV,YAAY,CAAC6B,MAAb,GAAsB,CAA1B,EAA6B;AAC5B,UAAI,CAACrB,aAAa,CAACuB,KAAD,CAAb,CAAqB,CAArB,EAAwBH,OAA7B,EAAsC;AACtCI,MAAAA,MAAM,CAACd,IAAP,CAAY;AACXe,QAAAA,OAAO,EAAEjC,YAAY,CAAC,CAAD,CAAZ,CAAgBgB,GADd;AAEXY,QAAAA,OAAO,EAAEpB,aAAa,CAACuB,KAAD,CAAb,CAAqB,CAArB,EAAwBH,OAFtB;AAGXM,QAAAA,KAAK,EAAE1B,aAAa,CAACuB,KAAD,CAAb,CAAqB,CAArB,EAAwBX;AAHpB,OAAZ;AAKA;;AACD,UAAMe,GAAG,GAAG,MAAM1C,OAAO,CACxB,mBADwB,EAExB;AAAE2C,MAAAA,aAAa,EAAEJ;AAAjB,KAFwB,EAGxB,MAHwB,CAAzB,CApBwC,CAyBxC;;AACAlC,IAAAA,OAAO,CAACC,GAAR,CAAYoC,GAAZ;AACA,GA3BD;;AA4BA,SACC,4BACC,MAAC,IAAD;AAAM,IAAA,aAAa,EAAC,QAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACC,MAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADD,EAEC,MAAC,QAAD;AACC,IAAA,eAAe,EAAEE,GAAG,IAAI;AACvBA,MAAAA,GAAG,CAACC,YAAJ,CAAiB,IAAjB,EAAuB,aAAvB;AACAD,MAAAA,GAAG,CAACC,YAAJ,CAAiB,OAAjB,EAA0B,uBAA1B;AACA,KAJF;AAKC,IAAA,GAAG,EAAG,GAAE1C,OAAQ,sCALjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFD,EASC,MAAC,IAAD;AAAM,IAAA,aAAa,EAAC,QAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACC,MAAC,IAAD;AACC,IAAA,cAAc,EAAC,cADhB;AAEC,IAAA,UAAU,EAAC,QAFZ;AAGC,IAAA,QAAQ,EAAC,QAHV;AAIC,IAAA,EAAE,EAAC,MAJJ;AAKC,IAAA,KAAK,EAAC,MALP;AAMC,IAAA,KAAK,EAAC,SANP;AAOC,IAAA,MAAM,EAAC,SAPR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KASC,MAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YATD,EAUC,MAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAVD,CADD,EAaC,MAAC,IAAD;AAAM,IAAA,QAAQ,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACEY,aAAa,CAAC+B,GAAd,CAAkB,CAACC,KAAD,EAAQT,KAAR,KAClB,MAAC,SAAD;AACC,IAAA,GAAG,EAAG,GAAEA,KAAM,QADf;AAEC,IAAA,SAAS,EAAES,KAFZ;AAGC,IAAA,KAAK,EAAET,KAHR;AAIC,IAAA,SAAS,EAAErB,WAAW,CAAC+B,OAAZ,CAAoBV,KAApB,KAA8B,CAJ1C;AAKC,IAAA,UAAU,EAAE,MAAM;AACjB5B,MAAAA,aAAa,CAAC,IAAD,CAAb;AACA,KAPF;AAQC,IAAA,aAAa,EAAE,MAAM;AACpB2B,MAAAA,iBAAiB,CAACC,KAAD,CAAjB;AACA,KAVF;AAWC,IAAA,WAAW,EAAE,MAAM;AAClB1B,MAAAA,cAAc,CAAC,IAAD,CAAd;AACAE,MAAAA,eAAe,CAACwB,KAAD,CAAf;AACA,KAdF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADA,CADF,CAbD,EAiCC,MAAC,IAAD;AAAM,IAAA,QAAQ,EAAC,SAAf;AAAyB,IAAA,KAAK,EAAC,MAA/B;AAAsC,IAAA,cAAc,EAAC,EAArD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACC,MAAC,MAAD;AACC,IAAA,MAAM,EAAC,SADR;AAEC,IAAA,KAAK,EAAC,QAFP;AAGC,IAAA,EAAE,EAAC,MAHJ;AAIC,IAAA,OAAO,EAAC,SAJT;AAKC,IAAA,OAAO,EAAC,GALT;AAMC,IAAA,MAAM,EAAC,SANR;AAOC,IAAA,KAAK,EAAC,QAPP;AAQC,IAAA,EAAE,EAAE;AACHW,MAAAA,YAAY,EAAE,CADX;AAEHC,MAAAA,MAAM,EAAE;AAFL,KARL;AAYC,IAAA,OAAO,EAAE,MAAM;AACdnD,MAAAA,MAAM,CAACoD,IAAP;AACA,KAdF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAgBE,UAhBF,CADD,EAmBC,MAAC,MAAD;AACC,IAAA,MAAM,EAAC,SADR;AAEC,IAAA,KAAK,EAAC,QAFP;AAGC,IAAA,EAAE,EAAC,SAHJ;AAIC,IAAA,OAAO,EAAC,SAJT;AAKC,IAAA,OAAO,EAAC,GALT;AAMC,IAAA,MAAM,EAAC,SANR;AAOC,IAAA,KAAK,EAAC,QAPP;AAQC,IAAA,EAAE,EAAE;AACHF,MAAAA,YAAY,EAAE,CADX;AAEHC,MAAAA,MAAM,EAAE;AAFL,KARL;AAYC,IAAA,OAAO,EAAE,MAAM;AACdnD,MAAAA,MAAM,CAAC0B,IAAP,CAAY,OAAZ;AACA,KAdF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAnBD,CAjCD,CATD,EAiFEhB,UAAU,GACV,MAAC,MAAD;AACC,IAAA,YAAY,EAAEF,YADf;AAEC,IAAA,QAAQ,EAAEQ,aAAa,CAACF,YAAD,CAFxB;AAGC,IAAA,OAAO,EAAE,MAAM;AACdH,MAAAA,aAAa,CAAC,KAAD,CAAb;AACA,KALF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADU,GAQP,IAzFL,EA0FEC,WAAW,GACX,MAAC,OAAD;AACC,IAAA,QAAQ,EAAEP,QADX;AAEC,IAAA,YAAY,EAAEG,YAFf;AAGC,IAAA,QAAQ,EAAEQ,aAAa,CAACF,YAAD,CAHxB;AAIC,IAAA,WAAW,EAAEmB,iBAJd;AAKC,IAAA,OAAO,EAAE,MAAM;AACdpB,MAAAA,cAAc,CAAC,KAAD,CAAd;AACA,KAPF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADW,GAUR,IApGL,CADD,CADD;AA0GA,CApLD","sourcesContent":["import React, { useState, useEffect } from \"react\"\nimport { Flex, Text, Box, Image, Button } from \"rebass\"\nimport Head from \"../components/nav\"\nimport EditBox from \"../components/made-edit-box\"\nimport BigBox from \"../components/made-big-box\"\nimport StyleItem from \"../components/made-style-item\"\nimport { getPageQuery } from \"../utils/helper\"\nimport Router from \"next/router\"\nimport request from \"../utils/request.js\"\nimport useUserInfo from \"../hooks/getUserInfo\"\nimport ReactSvg from \"../components/commons/react-svg\"\nimport { baseUrl } from \"../utils/helper\"\n// import SelectAssignTool from \"../components/select-assign-tool\"\nexport default () => {\n\tconst userInfo = useUserInfo()\n\tconsole.log(userInfo, \"userInfo\")\n\tconst [styleDetails, setStyleDetails] = useState([])\n\tconst [showBigBox, setShowBigBox] = useState(false)\n\tconst [showEditBox, setShowEditBox] = useState(false)\n\tconst [curItemIndex, setCurItemIndex] = useState(0)\n\tconst [styleInitData, setStyleInitData] = useState([[], [], [], [], [], []])\n\tconst [collectList, setCollectList] = useState([])\n\tuseEffect(() => {\n\t\tconst getStyleDetails = async () => {\n\t\t\tlet query = getPageQuery()\n\t\t\tconsole.log(query)\n\t\t\tlet reqList = []\n\t\t\tconst req = await request(\"style/detail\", { _id: query.id }, \"get\")\n\t\t\treqList.push(req)\n\t\t\tfor (let i = 0; i < 6; i++) {\n\t\t\t\tstyleInitData[i].push({ imgUrl: req.imgUrl, value: false })\n\t\t\t}\n\t\t\tif (query.id1) {\n\t\t\t\tconst req1 = await request(\"style/detail\", { _id: query.id1 }, \"get\")\n\t\t\t\treqList.push(req1)\n\t\t\t\tfor (let i = 0; i < 6; i++) {\n\t\t\t\t\tstyleInitData[i].push({ imgUrl: req1.imgUrl, value: false })\n\t\t\t\t}\n\t\t\t}\n\t\t\tsetStyleInitData([].concat(styleInitData))\n\t\t\tsetStyleDetails(reqList)\n\t\t}\n\t\tgetStyleDetails()\n\t}, [])\n\n\tconst handleConfirmMade = (colorIds, imgUrls) => {\n\t\tconsole.log(colorIds, imgUrls)\n\t\tif (!colorIds[0]) return\n\t\tstyleInitData[curItemIndex] = [{ colorId: colorIds[0], imgUrl: imgUrls[0] }]\n\t\tif (styleDetails.length > 1) {\n\t\t\tif (!colorIds[1]) return\n\t\t\tstyleInitData[curItemIndex].push({\n\t\t\t\tcolorId: colorIds[1],\n\t\t\t\timgUrl: imgUrls[1]\n\t\t\t})\n\t\t}\n\t\tsetStyleInitData([].concat(styleInitData))\n\t}\n\n\tconst handleAddFavorite = async index => {\n\t\tif (!styleInitData[index][0].colorId) return\n\t\tconsole.log(styleInitData[index][0])\n\t\tlet params = [\n\t\t\t{\n\t\t\t\tstyleId: styleDetails[0]._id,\n\t\t\t\tcolorId: styleInitData[index][0].colorId,\n\t\t\t\tfront: styleInitData[index][0].imgUrl\n\t\t\t}\n\t\t]\n\t\tcollectList.push(index)\n\t\tsetCollectList([].concat(collectList))\n\t\tif (styleDetails.length > 1) {\n\t\t\tif (!styleInitData[index][1].colorId) return\n\t\t\tparams.push({\n\t\t\t\tstyleId: styleDetails[1]._id,\n\t\t\t\tcolorId: styleInitData[index][1].colorId,\n\t\t\t\tfront: styleInitData[index][1].imgUrl\n\t\t\t})\n\t\t}\n\t\tconst res = await request(\n\t\t\t\"/user/addFavorite\",\n\t\t\t{ styleAndColor: params },\n\t\t\t\"post\"\n\t\t)\n\t\t// setStyleDetails([].concat(styleDetails))\n\t\tconsole.log(res)\n\t}\n\treturn (\n\t\t<>\n\t\t\t<Flex flexDirection=\"column\">\n\t\t\t\t<Head></Head>\n\t\t\t\t<ReactSvg\n\t\t\t\t\tbeforeInjection={svg => {\n\t\t\t\t\t\tsvg.setAttribute(\"id\", \"mm-defs-svg\")\n\t\t\t\t\t\tsvg.setAttribute(\"style\", \"width: 0%; height: 0%\")\n\t\t\t\t\t}}\n\t\t\t\t\tsrc={`${baseUrl}uploads/2020-03-07/1583561658305.svg`}\n\t\t\t\t/>\n\t\t\t\t<Flex flexDirection=\"column\">\n\t\t\t\t\t<Flex\n\t\t\t\t\t\tjustifyContent=\"space-around\"\n\t\t\t\t\t\talignItems=\"center\"\n\t\t\t\t\t\tfontSize=\"0.23px\"\n\t\t\t\t\t\tbg=\"#000\"\n\t\t\t\t\t\tcolor=\"#fff\"\n\t\t\t\t\t\twidth=\"19.2rem\"\n\t\t\t\t\t\theight=\"1.12rem\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Text>TOPS</Text>\n\t\t\t\t\t\t<Text>BOTTOMS</Text>\n\t\t\t\t\t</Flex>\n\t\t\t\t\t<Flex flexWrap=\"wrap\">\n\t\t\t\t\t\t{styleInitData.map((style, index) => (\n\t\t\t\t\t\t\t<StyleItem\n\t\t\t\t\t\t\t\tkey={`${index}-style`}\n\t\t\t\t\t\t\t\tstyleList={style}\n\t\t\t\t\t\t\t\tindex={index}\n\t\t\t\t\t\t\t\tcollected={collectList.indexOf(index) >= 0}\n\t\t\t\t\t\t\t\topenBigBox={() => {\n\t\t\t\t\t\t\t\t\tsetShowBigBox(true)\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tonAddFavorite={() => {\n\t\t\t\t\t\t\t\t\thandleAddFavorite(index)\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\topenEditBox={() => {\n\t\t\t\t\t\t\t\t\tsetShowEditBox(true)\n\t\t\t\t\t\t\t\t\tsetCurItemIndex(index)\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</Flex>\n\t\t\t\t\t<Flex fontSize=\"0.27rem\" color=\"#fff\" justifyContent=\"\">\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\theight=\"1.13rem\"\n\t\t\t\t\t\t\twidth=\"9.6rem\"\n\t\t\t\t\t\t\tbg=\"#000\"\n\t\t\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\t\t\tpadding=\"0\"\n\t\t\t\t\t\t\theight=\"1.13rem\"\n\t\t\t\t\t\t\twidth=\"9.6rem\"\n\t\t\t\t\t\t\tsx={{\n\t\t\t\t\t\t\t\tborderRadius: 0,\n\t\t\t\t\t\t\t\tcursor: \"pointer\"\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tRouter.back()\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{\"< RETURN\"}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\theight=\"1.13rem\"\n\t\t\t\t\t\t\twidth=\"9.6rem\"\n\t\t\t\t\t\t\tbg=\"#FF8E6C\"\n\t\t\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\t\t\tpadding=\"0\"\n\t\t\t\t\t\t\theight=\"1.13rem\"\n\t\t\t\t\t\t\twidth=\"9.6rem\"\n\t\t\t\t\t\t\tsx={{\n\t\t\t\t\t\t\t\tborderRadius: 0,\n\t\t\t\t\t\t\t\tcursor: \"pointer\"\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tRouter.push(\"/mine\")\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tCOMPLETE\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Flex>\n\t\t\t\t</Flex>\n\t\t\t\t{showBigBox ? (\n\t\t\t\t\t<BigBox\n\t\t\t\t\t\tstyleDetails={styleDetails}\n\t\t\t\t\t\tcurStyle={styleInitData[curItemIndex]}\n\t\t\t\t\t\tonClose={() => {\n\t\t\t\t\t\t\tsetShowBigBox(false)\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t) : null}\n\t\t\t\t{showEditBox ? (\n\t\t\t\t\t<EditBox\n\t\t\t\t\t\tuserInfo={userInfo}\n\t\t\t\t\t\tstyleDetails={styleDetails}\n\t\t\t\t\t\tcurStyle={styleInitData[curItemIndex]}\n\t\t\t\t\t\tconfirmMade={handleConfirmMade}\n\t\t\t\t\t\tonClose={() => {\n\t\t\t\t\t\t\tsetShowEditBox(false)\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t) : null}\n\t\t\t</Flex>\n\t\t</>\n\t)\n}\n"]},"metadata":{},"sourceType":"module"}